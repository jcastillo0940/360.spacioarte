import{r as a,u as v,j as e,H as N}from"./app-FXXXkb3F.js";import{A as y}from"./AuthenticatedLayout-BxxwF24W.js";/* empty css            */function C(){const[c,d]=a.useState([]),[u,x]=a.useState([]),[r,o]=a.useState(null),{data:l,setData:t,post:b,put:m,processing:h,reset:n,errors:p}=v({codigo:"",nombre:"",descripcion:"",tipo:"Inventariable",precio_venta:"",costo_promedio:"",stock_actual:0,stock_minimo:0,stock_maximo:0,tax_id:"",categoria:"",unidad_medida:"UND"});a.useEffect(()=>{i()},[]);const i=()=>{fetch("/api/inventario/items").then(s=>s.json()).then(s=>{d(s.items||[]),x(s.taxes||[]),(s.taxes||[]).length>0&&!r&&t("tax_id",s.taxes[0].id)}).catch(s=>{console.error("Error loading items:",s),d([]),x([])})},g=s=>{s.preventDefault(),r?m(`/inventario/items/${r}`,{onSuccess:()=>{n(),o(null),i()}}):b("/inventario/items",{onSuccess:()=>{n(),i()}})},f=s=>{t(s),o(s.id)},j=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return e.jsxs(y,{children:[e.jsx(N,{title:"Gestión de Inventario"}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Gestión de Inventario"]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Productos y servicios del catálogo"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 h-fit",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:r?"Editar Item":"Nuevo Item"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Código / SKU"}),e.jsx("input",{type:"text",value:l.codigo,onChange:s=>t("codigo",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",placeholder:"PROD-001",required:!0}),p.codigo&&e.jsx("span",{className:"text-red-500 text-xs",children:p.codigo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Nombre del Producto"}),e.jsx("input",{type:"text",value:l.nombre,onChange:s=>t("nombre",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Descripción"}),e.jsx("textarea",{value:l.descripcion||"",onChange:s=>t("descripcion",s.target.value),rows:"2",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Tipo"}),e.jsxs("select",{value:l.tipo,onChange:s=>t("tipo",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"Inventariable",children:"Producto Físico"}),e.jsx("option",{value:"Servicio",children:"Servicio"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Precio Venta"}),e.jsx("input",{type:"number",step:"0.01",value:l.precio_venta,onChange:s=>t("precio_venta",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Costo"}),e.jsx("input",{type:"number",step:"0.01",value:l.costo_promedio,onChange:s=>t("costo_promedio",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]})]}),l.tipo==="Inventariable"&&e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Stock Actual"}),e.jsx("input",{type:"number",step:"0.01",value:l.stock_actual,onChange:s=>t("stock_actual",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Stock Mín"}),e.jsx("input",{type:"number",step:"0.01",value:l.stock_minimo,onChange:s=>t("stock_minimo",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Stock Máx"}),e.jsx("input",{type:"number",step:"0.01",value:l.stock_maximo,onChange:s=>t("stock_maximo",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Impuesto"}),e.jsxs("select",{value:l.tax_id,onChange:s=>t("tax_id",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0,children:[u.length===0&&e.jsx("option",{value:"",children:"Cargando impuestos..."}),u.map(s=>e.jsxs("option",{value:s.id,children:[s.nombre," (",s.tasa,"%)"]},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Unidad"}),e.jsxs("select",{value:l.unidad_medida,onChange:s=>t("unidad_medida",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"UND",children:"Unidad"}),e.jsx("option",{value:"KG",children:"Kilogramo"}),e.jsx("option",{value:"LB",children:"Libra"}),e.jsx("option",{value:"LT",children:"Litro"}),e.jsx("option",{value:"MT",children:"Metro"}),e.jsx("option",{value:"CJ",children:"Caja"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Categoría"}),e.jsx("input",{type:"text",value:l.categoria||"",onChange:s=>t("categoria",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",placeholder:"Electrónica, Alimentos, etc."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:h,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition disabled:opacity-50",children:r?"Actualizar":"Guardar"}),r&&e.jsx("button",{type:"button",onClick:()=>{n(),o(null)},className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300 transition",children:"Cancelar"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:e.jsx("input",{type:"text",placeholder:"Buscar por código o nombre...",className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Código"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Nombre"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold uppercase",children:"Stock"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold uppercase",children:"Precio"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:c.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center text-slate-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("p",{className:"text-lg font-bold",children:"No hay productos registrados"}),e.jsx("p",{className:"text-sm mt-2",children:"Comienza agregando tu primer producto"})]})}):c.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono font-bold text-slate-900",children:s.codigo})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-900",children:s.nombre}),e.jsx("div",{className:"text-sm text-slate-500",children:s.categoria||"Sin categoría"})]}),e.jsx("td",{className:"px-6 py-4 text-right",children:s.tipo==="Inventariable"?e.jsxs("span",{className:`font-bold ${s.stock_actual<=s.stock_minimo?"text-red-600":"text-slate-900"}`,children:[s.stock_actual," ",s.unidad_medida]}):e.jsx("span",{className:"text-slate-400 text-sm",children:"N/A"})}),e.jsx("td",{className:"px-6 py-4 text-right text-blue-600 font-bold",children:j(s.precio_venta)}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("button",{onClick:()=>f(s),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition font-bold text-sm inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]})})]},s.id))})]})})]})]})]})]})}export{C as default};
