import{r,j as e,H as j}from"./app-B9gv8ZBn.js";import{A as f}from"./AuthenticatedLayout-BtVr5BZh.js";function w(){var c,x,m;const[s,p]=r.useState(null),[b,o]=r.useState(!0),[n,u]=r.useState(new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0]),[d,h]=r.useState(new Date().toISOString().split("T")[0]);r.useEffect(()=>{i()},[]);const i=()=>{o(!0),fetch(`/api/reportes/estado-resultados?fecha_inicio=${n}&fecha_fin=${d}`).then(t=>t.json()).then(t=>{p(t),o(!1)})},a=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),g=()=>{window.print()};return e.jsxs(f,{children:[e.jsx(j,{title:"Estado de Resultados"}),e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"mb-8 print:hidden",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Estado de Resultados"]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Reporte de ingresos y gastos (P&L)"})]}),e.jsxs("button",{onClick:g,className:"px-6 py-3 bg-slate-900 text-white rounded-lg font-bold hover:bg-slate-800 transition flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 mb-6 print:hidden",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Fecha Inicio"}),e.jsx("input",{type:"date",value:n,onChange:t=>u(t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Fecha Fin"}),e.jsx("input",{type:"date",value:d,onChange:t=>h(t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsxs("button",{onClick:i,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Actualizar"]})]})}),b?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-slate-600 mt-4",children:"Generando reporte..."})]}):s?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 text-white p-6 text-center",children:[e.jsx("h2",{className:"text-2xl font-black uppercase tracking-wider",children:"Estado de Resultados"}),e.jsxs("p",{className:"text-sm mt-2 text-slate-300",children:["Del ",new Date(n).toLocaleDateString("es-PA")," al ",new Date(d).toLocaleDateString("es-PA")]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 uppercase tracking-wide mb-4 pb-2 border-b-2 border-blue-600",children:"Ingresos Operacionales"}),e.jsx("div",{className:"space-y-2",children:(c=s.ingresos)==null?void 0:c.map((t,l)=>e.jsxs("div",{className:"flex justify-between py-2 px-4 hover:bg-slate-50 rounded",children:[e.jsx("span",{className:"text-slate-700",children:t.nombre}),e.jsx("span",{className:"font-bold text-slate-900",children:a(t.monto)})]},l))}),e.jsxs("div",{className:"flex justify-between py-3 px-4 mt-4 bg-blue-50 rounded-lg border-2 border-blue-200",children:[e.jsx("span",{className:"font-bold text-blue-900 uppercase text-sm",children:"Total Ingresos"}),e.jsx("span",{className:"font-black text-xl text-blue-900",children:a(s.total_ingresos)})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 uppercase tracking-wide mb-4 pb-2 border-b-2 border-orange-600",children:"Costo de Ventas"}),e.jsx("div",{className:"space-y-2",children:(x=s.costos)==null?void 0:x.map((t,l)=>e.jsxs("div",{className:"flex justify-between py-2 px-4 hover:bg-slate-50 rounded",children:[e.jsx("span",{className:"text-slate-700",children:t.nombre}),e.jsxs("span",{className:"font-bold text-red-600",children:["(",a(t.monto),")"]})]},l))}),e.jsxs("div",{className:"flex justify-between py-3 px-4 mt-4 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("span",{className:"font-bold text-orange-900 uppercase text-sm",children:"Total Costo de Ventas"}),e.jsxs("span",{className:"font-black text-xl text-red-600",children:["(",a(s.total_costos),")"]})]})]}),e.jsx("div",{className:"mb-8 py-4 px-4 bg-green-100 rounded-lg border-2 border-green-400",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-black text-lg text-green-900 uppercase",children:"Utilidad Bruta"}),e.jsx("span",{className:"font-black text-2xl text-green-800",children:a(s.utilidad_bruta)})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 uppercase tracking-wide mb-4 pb-2 border-b-2 border-purple-600",children:"Gastos Operacionales"}),e.jsx("div",{className:"space-y-2",children:(m=s.gastos)==null?void 0:m.map((t,l)=>e.jsxs("div",{className:"flex justify-between py-2 px-4 hover:bg-slate-50 rounded",children:[e.jsx("span",{className:"text-slate-700",children:t.nombre}),e.jsxs("span",{className:"font-bold text-red-600",children:["(",a(t.monto),")"]})]},l))}),e.jsxs("div",{className:"flex justify-between py-3 px-4 mt-4 bg-purple-50 rounded-lg border-2 border-purple-200",children:[e.jsx("span",{className:"font-bold text-purple-900 uppercase text-sm",children:"Total Gastos"}),e.jsxs("span",{className:"font-black text-xl text-red-600",children:["(",a(s.total_gastos),")"]})]})]}),e.jsx("div",{className:"py-6 px-6 bg-slate-900 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-black text-2xl text-white uppercase tracking-wider",children:"Utilidad Neta"}),e.jsx("span",{className:`font-black text-4xl ${s.utilidad_neta>=0?"text-green-400":"text-red-400"}`,children:a(s.utilidad_neta)})]})}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-blue-600 mb-1",children:"Margen Bruto"}),e.jsxs("div",{className:"text-2xl font-black text-blue-900",children:[s.total_ingresos>0?(s.utilidad_bruta/s.total_ingresos*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-purple-600 mb-1",children:"Margen Operacional"}),e.jsxs("div",{className:"text-2xl font-black text-purple-900",children:[s.total_ingresos>0?((s.utilidad_bruta-s.total_gastos)/s.total_ingresos*100).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-green-600 mb-1",children:"Margen Neto"}),e.jsxs("div",{className:"text-2xl font-black text-green-900",children:[s.total_ingresos>0?(s.utilidad_neta/s.total_ingresos*100).toFixed(1):0,"%"]})]})]})]})]}):null]})]})}export{w as default};
