import{r as o,u as f,j as e,H as b}from"./app-BqyPfEI0.js";import{A as h}from"./AuthenticatedLayout-ChjIDkpR.js";function _(){const[n,i]=o.useState([]),[u,x]=o.useState([]),{data:r,setData:s,post:p,processing:l,errors:c}=f({factura_compra_id:"",bank_account_id:"",monto_pagado:"",fecha_pago:new Date().toISOString().split("T")[0],metodo_pago:"Transferencia",referencia:"",notas:""});o.useEffect(()=>{g()},[]);const g=()=>{fetch("/api/compras/egresos/datos").then(a=>a.json()).then(a=>{i(a.facturas),x(a.bancos)})},t=n.find(a=>a.id==r.factura_compra_id),m=a=>{a.preventDefault(),p(route("compras.pagos.store"))},d=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a);return e.jsxs(h,{children:[e.jsx(b,{title:"Registrar Egreso"}),e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Nuevo Egreso / Pago a Proveedor"]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Registrar pago de cuentas por pagar"})]}),e.jsxs("form",{onSubmit:m,className:"bg-white p-8 rounded-lg shadow-sm border border-slate-200 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Factura de Compra Pendiente"}),e.jsxs("select",{value:r.factura_compra_id,onChange:a=>s("factura_compra_id",a.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 focus:ring-1 focus:ring-green-500 transition",required:!0,children:[e.jsx("option",{value:"",children:"-- Seleccione una factura --"}),n.map(a=>e.jsxs("option",{value:a.id,children:[a.numero_factura," - ",a.proveedor.razon_social," (Saldo: ",d(a.saldo_pendiente),")"]},a.id))]}),c.factura_compra_id&&e.jsx("span",{className:"text-red-500 text-xs",children:c.factura_compra_id})]}),t&&e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200 flex justify-between items-center",children:[e.jsx("span",{className:"text-orange-700 font-bold",children:"Saldo a Pagar:"}),e.jsx("span",{className:"text-2xl font-black text-orange-800",children:d(t.saldo_pendiente)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Pagar desde:"}),e.jsxs("select",{value:r.bank_account_id,onChange:a=>s("bank_account_id",a.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 focus:ring-1 focus:ring-green-500 transition",required:!0,children:[e.jsx("option",{value:"",children:"-- Seleccione Banco --"}),u.map(a=>e.jsxs("option",{value:a.id,children:[a.nombre_banco," (***",a.numero_cuenta.slice(-4),")"]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Monto a Pagar ($)"}),e.jsx("input",{type:"number",step:"0.01",value:r.monto_pagado,onChange:a=>s("monto_pagado",a.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 focus:ring-1 focus:ring-green-500 transition",max:t==null?void 0:t.saldo_pendiente,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Método de Pago"}),e.jsxs("select",{value:r.metodo_pago,onChange:a=>s("metodo_pago",a.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 focus:ring-1 focus:ring-green-500 transition",children:[e.jsx("option",{value:"Transferencia",children:"Transferencia"}),e.jsx("option",{value:"Cheque",children:"Cheque"}),e.jsx("option",{value:"Efectivo",children:"Efectivo"}),e.jsx("option",{value:"ACH",children:"ACH"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Referencia / # Transacción"}),e.jsx("input",{type:"text",value:r.referencia,onChange:a=>s("referencia",a.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 focus:ring-1 focus:ring-green-500 transition",placeholder:"CHK-8829"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Notas"}),e.jsx("textarea",{value:r.notas,onChange:a=>s("notas",a.target.value),rows:"2",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-green-500 focus:ring-1 focus:ring-green-500 transition"})]}),e.jsxs("button",{type:"submit",disabled:l||!r.factura_compra_id,className:"w-full bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition disabled:bg-slate-400 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),l?"Procesando...":"Confirmar Pago"]})]})]})]})}export{_ as default};
