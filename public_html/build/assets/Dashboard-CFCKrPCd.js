import{r as j,j as e,H as V,a as w}from"./app-DUrg3GOp.js";import{A as P}from"./AuthenticatedLayout-C3zTQCkg.js";function M({stats:r,grafica:n,ventas_cliente:c,ventas_producto:d,rentabilidad_cliente:i,rentabilidad_producto:x,ventas_vendedor:m,saldos_clientes:g,saldos_proveedores:h}){const[$,N]=j.useState("mes"),[p,F]=j.useState(""),[y,S]=j.useState(""),[z,v]=j.useState(!1),t=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s||0),H=s=>new Intl.NumberFormat("en-US").format(s||0),f=Math.max(...n.map(s=>Math.max(s.ventas,s.gastos)),1),I=s=>{s==="personalizado"?(v(!0),N(s)):(v(!1),N(s),w.get("/dashboard",{periodo:s},{preserveState:!0}))},T=()=>{p&&y&&w.get("/dashboard",{periodo:"personalizado",fecha_inicio:p,fecha_fin:y},{preserveState:!0})};return e.jsxs(P,{children:[e.jsx(V,{title:"Dashboard"}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto p-6",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"An√°lisis de operaciones y rentabilidad"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:$,onChange:s=>I(s.target.value),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"dia",children:"Hoy"}),e.jsx("option",{value:"mes",children:"Este mes"}),e.jsx("option",{value:"trimestre",children:"Trimestre"}),e.jsx("option",{value:"semestre",children:"Semestre"}),e.jsx("option",{value:"anual",children:"A√±o"}),e.jsx("option",{value:"historico",children:"Hist√≥rico"}),e.jsx("option",{value:"personalizado",children:"Personalizado"})]}),z&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:p,onChange:s=>F(s.target.value),className:"px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm"}),e.jsx("span",{className:"text-gray-500",children:"‚Äî"}),e.jsx("input",{type:"date",value:y,onChange:s=>S(s.target.value),className:"px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm"}),e.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:"Aplicar"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[e.jsx(b,{title:"Ventas",value:t(r.ventas_mes),icon:"üìà",color:"text-green-600",bgColor:"bg-green-50"}),e.jsx(b,{title:"Gastos",value:t(r.gastos_mes),icon:"üìâ",color:"text-red-600",bgColor:"bg-red-50"}),e.jsx(b,{title:"Utilidad Neta",value:t(r.ventas_mes-r.gastos_mes),icon:"üí∞",color:"text-blue-600",bgColor:"bg-blue-50"}),e.jsx(b,{title:"Por Cobrar",value:t(r.cxc_pendiente),icon:"‚è±Ô∏è",color:"text-orange-600",bgColor:"bg-orange-50"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tendencia Financiera"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Ventas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Gastos"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Utilidad"})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"min-w-full",style:{minWidth:`${n.length*60}px`},children:e.jsx("div",{className:"flex items-end justify-between h-64 gap-2 px-4",children:n.map((s,a)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center group min-w-[50px]",children:[e.jsxs("div",{className:"w-full flex justify-center gap-1 items-end h-48 relative",children:[e.jsx("div",{className:"w-3 bg-green-500 rounded-t hover:bg-green-600 transition-colors relative",style:{height:`${s.ventas/f*100}%`,minHeight:"4px"},children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded whitespace-nowrap transition-opacity z-10",children:t(s.ventas)})}),e.jsx("div",{className:"w-3 bg-red-500 rounded-t hover:bg-red-600 transition-colors relative",style:{height:`${s.gastos/f*100}%`,minHeight:"4px"},children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded whitespace-nowrap transition-opacity z-10",children:t(s.gastos)})}),e.jsx("div",{className:"w-3 bg-blue-500 rounded-t hover:bg-blue-600 transition-colors relative",style:{height:`${(s.ventas-s.gastos)/f*100}%`,minHeight:"4px"},children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-10 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs py-1 px-2 rounded whitespace-nowrap transition-opacity z-10",children:t(s.ventas-s.gastos)})})]}),e.jsx("span",{className:"text-xs text-gray-600 mt-3 font-medium",children:s.mes})]},a))})})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 mb-6",children:[e.jsx(o,{title:"Top Clientes por Ventas",children:e.jsx("div",{className:"space-y-3",children:c==null?void 0:c.slice(0,8).map((s,a)=>{var l;return e.jsx(u,{position:a+1,label:s.nombre,value:t(s.total),subtitle:`${s.ordenes} √≥rdenes`,percentage:s.total/((l=c[0])==null?void 0:l.total)*100},a)})})}),e.jsx(o,{title:"Top Productos por Ventas",children:e.jsx("div",{className:"space-y-3",children:d==null?void 0:d.slice(0,8).map((s,a)=>{var l;return e.jsx(u,{position:a+1,label:s.nombre,value:t(s.total),subtitle:`${H(s.cantidad)} unidades`,percentage:s.total/((l=d[0])==null?void 0:l.total)*100},a)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 mb-6",children:[e.jsx(o,{title:"Rentabilidad por Cliente",children:e.jsx("div",{className:"space-y-3",children:i==null?void 0:i.slice(0,8).map((s,a)=>{var l;return e.jsx(u,{position:a+1,label:s.nombre,value:t(s.utilidad),subtitle:`Margen: ${s.margen}%`,percentage:s.utilidad/((l=i[0])==null?void 0:l.utilidad)*100,color:"blue"},a)})})}),e.jsx(o,{title:"Rentabilidad por Producto",children:e.jsx("div",{className:"space-y-3",children:x==null?void 0:x.slice(0,8).map((s,a)=>{var l;return e.jsx(u,{position:a+1,label:s.nombre,value:t(s.utilidad),subtitle:`Margen: ${s.margen}%`,percentage:s.utilidad/((l=x[0])==null?void 0:l.utilidad)*100,color:"blue"},a)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx(o,{title:"Top Vendedores",children:e.jsx("div",{className:"space-y-3",children:m==null?void 0:m.slice(0,6).map((s,a)=>{var l;return e.jsx(u,{position:a+1,label:s.nombre,value:t(s.total),subtitle:`${s.ordenes} ventas`,percentage:s.total/((l=m[0])==null?void 0:l.total)*100,color:"green"},a)})})}),e.jsxs(o,{title:"Cuentas por Cobrar",children:[e.jsx("div",{className:"space-y-3",children:g==null?void 0:g.slice(0,6).map((s,a)=>e.jsx(C,{nombre:s.nombre,saldo:t(s.saldo),vencido:s.vencido,dias:s.dias_promedio},a))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t(g==null?void 0:g.reduce((s,a)=>s+a.saldo,0))})]})})]}),e.jsxs(o,{title:"Cuentas por Pagar",children:[e.jsx("div",{className:"space-y-3",children:h==null?void 0:h.slice(0,6).map((s,a)=>e.jsx(C,{nombre:s.nombre,saldo:t(s.saldo),vencido:s.vencido,dias:s.dias_promedio},a))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t(h==null?void 0:h.reduce((s,a)=>s+a.saldo,0))})]})})]})]})]})})]})}function b({title:r,value:n,icon:c,color:d,bgColor:i}){return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-2xl ${i} p-2 rounded-lg`,children:c}),e.jsx("span",{className:`text-2xl font-bold ${d}`,children:n})]}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:r})]})}function o({title:r,children:n}){return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:r}),n]})}function u({position:r,label:n,value:c,subtitle:d,percentage:i,color:x="gray"}){const m={gray:"bg-gray-500",green:"bg-green-500",blue:"bg-blue-500"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded bg-gray-100 text-gray-700 font-semibold text-xs flex items-center justify-center flex-shrink-0",children:r}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:n}),d&&e.jsx("div",{className:"text-xs text-gray-500",children:d})]}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c})]}),e.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:e.jsx("div",{className:`h-full ${m[x]} rounded-full transition-all duration-500`,style:{width:`${i}%`}})})]})}function C({nombre:r,saldo:n,vencido:c,dias:d}){const i=c>0;return e.jsx("div",{className:`p-3 rounded-lg ${i?"bg-red-50 border border-red-200":"bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:r}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i&&e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-red-500 text-white text-xs font-medium rounded",children:[c," vencidas"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[d," d√≠as"]})]})]}),e.jsx("div",{className:`text-sm font-semibold ml-2 ${i?"text-red-600":"text-gray-900"}`,children:n})]})})}export{M as default};
