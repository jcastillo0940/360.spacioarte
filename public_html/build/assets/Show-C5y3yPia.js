import{r,j as e,H as x,a as h}from"./app-FXXXkb3F.js";import{A as n}from"./AuthenticatedLayout-BxxwF24W.js";/* empty css            */function j({ordenId:l}){const[t,d]=r.useState(null),[c,i]=r.useState(!0);r.useEffect(()=>{fetch(`/api/ventas/ordenes/${l}`).then(s=>s.json()).then(s=>{d(s),i(!1)})},[l]);const o=()=>{confirm("¿Desea generar la factura fiscal a partir de esta orden?")&&h.post(route("facturas.convertir",t.id))},a=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return c?e.jsx(n,{children:e.jsxs("div",{className:"max-w-4xl mx-auto p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-slate-600 mt-4",children:"Cargando orden..."})]})}):e.jsxs(n,{children:[e.jsx(x,{title:`Orden ${t.numero_orden}`}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-slate-900",children:["Orden de Venta: ",t.numero_orden]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Cliente: ",t.cliente.razon_social]})]}),e.jsxs("div",{className:"flex gap-3",children:[t.estado==="Confirmada"&&e.jsxs("button",{onClick:o,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generar Factura"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${t.estado==="Confirmada"?"bg-blue-100 text-blue-700":t.estado==="Facturada"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-700"}`,children:t.estado})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"pb-4 text-left text-xs font-bold uppercase text-slate-600",children:"Descripción"}),e.jsx("th",{className:"pb-4 text-center text-xs font-bold uppercase text-slate-600",children:"Cant."}),e.jsx("th",{className:"pb-4 text-right text-xs font-bold uppercase text-slate-600",children:"Precio"}),e.jsx("th",{className:"pb-4 text-right text-xs font-bold uppercase text-slate-600",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:t.detalles.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-slate-900",children:s.item.nombre}),e.jsx("td",{className:"py-4 text-center text-slate-600",children:s.cantidad}),e.jsx("td",{className:"py-4 text-right text-slate-600",children:a(s.precio_unitario)}),e.jsx("td",{className:"py-4 text-right font-bold text-slate-900",children:a(s.total)})]},s.id))})]}),e.jsx("div",{className:"mt-8 flex justify-end",children:e.jsxs("div",{className:"w-64 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-slate-600",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-bold",children:a(t.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-slate-600",children:[e.jsx("span",{children:"ITBMS (7%):"}),e.jsx("span",{className:"font-bold",children:a(t.itbms_total)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-black border-t border-slate-200 pt-2 text-slate-900",children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:a(t.total)})]})]})})]})]})})]})}export{j as default};
