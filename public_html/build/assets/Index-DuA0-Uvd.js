import{r as o,u as c,j as e,H as v}from"./app-B9gv8ZBn.js";import{A as N}from"./AuthenticatedLayout-BtVr5BZh.js";function C(){const[r,u]=o.useState([]),[x,b]=o.useState([]),[m,n]=o.useState(!1),{data:l,setData:a,post:h,processing:p,reset:f}=c({nombre_banco:"",numero_cuenta:"",tipo_cuenta:"Ahorros",moneda:"USD",saldo_inicial:0,account_id:""}),t=c({from_id:"",to_id:"",monto:"",fecha:new Date().toISOString().split("T")[0]});o.useEffect(()=>{i()},[]);const i=()=>{fetch("/api/contabilidad/bancos").then(s=>s.json()).then(s=>{u(s.bancos),b(s.accounts),s.accounts.length>0&&a("account_id",s.accounts[0].id)})},g=s=>{s.preventDefault(),h("/contabilidad/bancos",{onSuccess:()=>{f(),i()}})},j=s=>{s.preventDefault(),t.post("/contabilidad/bancos/transferir",{onSuccess:()=>{t.reset(),n(!1),i()}})},d=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return e.jsxs(N,{children:[e.jsx(v,{title:"Gestión de Bancos"}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Tesorería y Bancos"]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Control de cuentas bancarias y movimientos"})]}),e.jsxs("button",{onClick:()=>n(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Transferir"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 h-fit",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:"Nueva Cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Nombre del Banco"}),e.jsx("input",{type:"text",value:l.nombre_banco,onChange:s=>a("nombre_banco",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",placeholder:"Banco General",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Número de Cuenta"}),e.jsx("input",{type:"text",value:l.numero_cuenta,onChange:s=>a("numero_cuenta",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition font-mono",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Tipo de Cuenta"}),e.jsxs("select",{value:l.tipo_cuenta,onChange:s=>a("tipo_cuenta",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"Ahorros",children:"Ahorros"}),e.jsx("option",{value:"Corriente",children:"Corriente"}),e.jsx("option",{value:"Caja Chica",children:"Caja Chica"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Cuenta Contable"}),e.jsx("select",{value:l.account_id,onChange:s=>a("account_id",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0,children:x.map(s=>e.jsxs("option",{value:s.id,children:[s.codigo," - ",s.nombre]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Moneda"}),e.jsxs("select",{value:l.moneda,onChange:s=>a("moneda",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"PAB",children:"PAB"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Saldo Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:l.saldo_inicial,onChange:s=>a("saldo_inicial",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition",children:"Registrar Cuenta"})]})]}),e.jsx("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:r.length===0?e.jsxs("div",{className:"md:col-span-2 bg-white p-12 rounded-lg shadow-sm border border-slate-200 text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),e.jsx("p",{className:"text-lg font-bold text-slate-900",children:"No hay cuentas bancarias"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Registra tu primera cuenta bancaria"})]}):r.map(s=>e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 p-6 rounded-lg shadow-lg text-white",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:s.nombre_banco}),e.jsx("p",{className:"text-sm text-slate-300",children:s.tipo_cuenta})]}),e.jsx("span",{className:"px-2 py-1 bg-blue-500 rounded text-xs font-bold",children:s.moneda})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Número de Cuenta"}),e.jsx("p",{className:"font-mono text-sm",children:s.numero_cuenta})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Saldo Disponible"}),e.jsx("p",{className:"text-3xl font-black",children:d(s.saldo_actual)})]}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsx("button",{className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm font-bold transition",children:"Ver Movimientos"})})]},s.id))})]})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Transferencia entre Cuentas"}),e.jsx("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Desde Cuenta"}),e.jsxs("select",{value:t.data.from_id,onChange:s=>t.setData("from_id",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),r.map(s=>e.jsxs("option",{value:s.id,children:[s.nombre_banco," - ",d(s.saldo_actual)]},s.id))]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Hacia Cuenta"}),e.jsxs("select",{value:t.data.to_id,onChange:s=>t.setData("to_id",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0,children:[e.jsx("option",{value:"",children:"Seleccione..."}),r.filter(s=>s.id!=t.data.from_id).map(s=>e.jsx("option",{value:s.id,children:s.nombre_banco},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Monto"}),e.jsx("input",{type:"number",step:"0.01",value:t.data.monto,onChange:s=>t.setData("monto",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"flex-1 px-6 py-3 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300 transition",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:t.processing,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition",children:"Transferir"})]})]})]})})]})}export{C as default};
