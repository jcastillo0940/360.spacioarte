import{r as n,c as u,j as e,H as se,b as ae}from"./app-BqyPfEI0.js";import{A as re}from"./AuthenticatedLayout-ChjIDkpR.js";import{S as v}from"./shopping-bag-CwVJO2os.js";import{C as E}from"./clipboard-list-CsMS4Gu5.js";import{c as m}from"./createLucideIcon-DrM2Vc-y.js";import{U as le}from"./user-tBKGQtqr.js";import{T as ne}from"./trash-2-BgCdDlYG.js";import{M as ce}from"./minus-abSpsvsg.js";import{P as M}from"./plus-De02fmEl.js";import{A as $}from"./arrow-right-C5jXbcg0.js";import{S as R}from"./search-Cu_oT07V.js";import{X as I}from"./x-BAopiOVH.js";import{B as oe}from"./banknote-BUG83bs5.js";import{C as ie}from"./credit-card-Dc-GGEGi.js";import{C as de}from"./chevron-right-P83XgOQT.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]],pe=m("chart-bar",xe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],he=m("hash",me);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],ue=m("layout-grid",be);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],je=m("log-out",fe);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ne=m("receipt",ge);function Pe({sesion:w,items:k,bancos:f,paymentTerms:ve,metodosPago:T}){var O;const[l,i]=n.useState([]),[P,y]=n.useState(k),[p,D]=n.useState(""),[C,L]=n.useState({id:1,razon_social:"CONSUMIDOR FINAL"}),[we,h]=n.useState(!1),[B,j]=n.useState(!1),[r,x]=n.useState({metodo:"Efectivo",banco:f.length>0?f[0].id:"",recibido:0,referencia:""}),[V,g]=n.useState(!1),[F,U]=n.useState([]),[_,X]=n.useState(""),[H,S]=n.useState(!1),[o,Q]=n.useState(null),b=l.reduce((t,a)=>t+a.precio*a.cantidad-(a.descuento||0),0),N=b*.07,d=b+N,z=r.recibido-d;n.useEffect(()=>{if(p.length>2){const t=setTimeout(()=>{q()},300);return()=>clearTimeout(t)}else p.length===0&&y(k)},[p]);const q=async()=>{h(!0);try{const t=await u.get(route("pos.items",{q:p}));y(t.data)}catch(t){console.error(t)}h(!1)},G=async()=>{h(!0);try{const t=await u.get(route("pos.ordenes",{q:_}));U(t.data)}catch(t){console.error(t)}h(!1)},Z=(t,a)=>{i(l.map(s=>s.id===t?{...s,precio:parseFloat(a)||0}:s))},J=(t,a)=>{i(l.map(s=>s.id===t?{...s,descuento:parseFloat(a)||0}:s))},K=t=>{const a=l.find(s=>s.id===t.id);i(a?l.map(s=>s.id===t.id?{...s,cantidad:s.cantidad+1}:s):[...l,{id:t.id,nombre:t.nombre,precio:t.precio_venta||t.precio_produccion||0,cantidad:1,descuento:0}])},W=t=>{i(l.filter(a=>a.id!==t))},A=(t,a)=>{i(l.map(s=>{if(s.id===t){const c=Math.max(1,s.cantidad+a);return{...s,cantidad:c}}return s}))},Y=t=>{if(!t||!t.detalles)return;const a=t.detalles.filter(c=>c.item).map(c=>({id:c.item_id,nombre:c.item.nombre,precio:Number(c.precio_unitario)||0,cantidad:Number(c.cantidad)||1,descuento:0,fromOrder:t.id}));i(a),L(t.cliente||{id:1,razon_social:"CONSUMIDOR FINAL"});const s=Number(t.total_num||0)-Number(t.abonado_num||0);x(c=>({...c,recibido:s>0?s:0})),g(!1)},ee=async()=>{var t,a;if(l.length!==0)try{const s=await u.post(route("pos.procesar"),{contacto_id:C.id,items:l,metodo_pago:r.metodo,monto_pago:r.recibido>d?d:r.recibido,bank_account_id:r.banco,referencia:r.referencia});alert("Venta procesada con éxito. Factura #"+s.data.factura_id),i([]),j(!1),x({...r,recibido:0,referencia:""})}catch(s){alert("Error al procesar la venta: "+((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.error))}},te=async()=>{try{const t=await u.get(route("pos.corte-x"));Q(t.data),S(!0)}catch(t){console.error(t)}};return e.jsxs(re,{children:[e.jsx(se,{title:"Punto de Venta (POS)"}),e.jsxs("div",{className:"h-[calc(100vh-64px)] overflow-hidden flex flex-col bg-[#F5F5F7]",children:[e.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center text-white",children:e.jsx(v,{size:20})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-black tracking-tight text-slate-900",children:"360 POS SYSTEM"}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["Sucursal: ",w.caja.nombre]})]})]}),e.jsx("div",{className:"h-10 w-px bg-slate-200"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 bg-purple-50 text-purple-600 px-4 py-2 rounded-xl text-xs font-black transition hover:bg-purple-100",children:[e.jsx(E,{size:16})," CARGAR ORDEN"]}),e.jsxs("button",{onClick:te,className:"flex items-center gap-2 bg-blue-50 text-blue-600 px-4 py-2 rounded-xl text-xs font-black transition hover:bg-blue-100",children:[e.jsx(pe,{size:16})," CORTE X"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-black text-slate-900",children:(O=w.cajero)==null?void 0:O.name}),e.jsx("p",{className:"text-[10px] font-bold text-green-600 uppercase",children:"SESIÓN ACTIVA"})]}),e.jsx("button",{onClick:()=>ae.post(route("pos.cerrar"),{monto_real:0}),className:"p-2 hover:bg-red-50 text-red-500 rounded-xl transition",title:"Cerrar Caja (Corte Z)",children:e.jsx(je,{size:20})})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-[480px] bg-white border-r border-slate-200 flex flex-col shadow-xl z-10",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Cliente"}),e.jsx("button",{className:"text-[10px] font-black text-blue-600 hover:underline",children:"CAMBIAR"})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center text-slate-400",children:e.jsx(le,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:C.razon_social}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500",children:"CLIENTE GENERAL"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-2",children:l.length===0?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-30 select-none",children:[e.jsx(v,{size:64,className:"mb-4"}),e.jsx("p",{className:"text-sm font-black uppercase tracking-widest",children:"Carrito Vacío"}),e.jsx("p",{className:"text-xs font-bold mt-2 font-mono",children:"ESCANEA O BUSCA PRODUCTOS"})]}):e.jsx("div",{className:"space-y-4",children:l.map((t,a)=>e.jsxs("div",{className:"bg-[#F8F9FA] p-4 rounded-3xl border border-transparent hover:border-slate-200 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 pr-4",children:[e.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase truncate",children:t.nombre}),t.fromOrder&&e.jsxs("span",{className:"bg-purple-100 text-purple-600 text-[8px] font-black px-1.5 py-0.5 rounded uppercase mt-1 inline-block",children:["De Orden #",t.fromOrder]})]}),e.jsx("button",{onClick:()=>W(t.id),className:"text-red-300 hover:text-red-500 transition-colors",children:e.jsx(ne,{size:14})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase mb-1 block",children:"Cant."}),e.jsxs("div",{className:"flex items-center gap-1 bg-white p-1 rounded-xl shadow-sm border border-slate-100",children:[e.jsx("button",{onClick:()=>A(t.id,-1),className:"w-6 h-6 flex items-center justify-center text-slate-400 hover:text-slate-900",children:e.jsx(ce,{size:12})}),e.jsx("span",{className:"flex-1 text-center text-xs font-mono font-black",children:t.cantidad}),e.jsx("button",{onClick:()=>A(t.id,1),className:"w-6 h-6 flex items-center justify-center text-slate-400 hover:text-slate-900",children:e.jsx(M,{size:12})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase mb-1 block",children:"Precio Unit."}),e.jsxs("div",{className:"flex items-center bg-white p-1 rounded-xl shadow-sm border border-slate-100",children:[e.jsx("span",{className:"text-[10px] pl-1 font-bold text-slate-300",children:"$"}),e.jsx("input",{type:"number",value:t.precio,onChange:s=>Z(t.id,s.target.value),className:"w-full border-none p-1 text-xs font-black font-mono focus:ring-0 bg-transparent"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase mb-1 block",children:"Total Item"}),e.jsxs("p",{className:"text-sm font-black text-slate-900 font-mono",children:["$",Number(t.precio*t.cantidad-(t.descuento||0)).toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase",children:"Dcto:"}),e.jsx("input",{type:"number",value:t.descuento,onChange:s=>J(t.id,s.target.value),className:"w-16 border-none p-0 text-[10px] font-black font-mono focus:ring-0 bg-transparent",placeholder:"0.00"})]}),e.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:"Sin ITBMS"})]})]},a))})}),e.jsxs("div",{className:"p-8 bg-[#F8F9FA] rounded-t-[3rem] shadow-[0_-10px_40px_rgba(0,0,0,0.03)]",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 uppercase tracking-widest",children:[e.jsx("span",{children:"Subtotal Neto"}),e.jsxs("span",{children:["$",Number(b).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 uppercase tracking-widest",children:[e.jsx("span",{children:"ITBMS (7%)"}),e.jsxs("span",{children:["$",Number(N).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-3xl font-black text-slate-900 mt-4 border-t border-slate-200 pt-4 font-mono",children:[e.jsx("span",{children:"TOTAL"}),e.jsxs("span",{children:["$",Number(d).toFixed(2)]})]})]}),e.jsxs("button",{onClick:()=>j(!0),disabled:l.length===0,className:"w-full bg-slate-900 hover:bg-black text-white py-6 rounded-3xl font-black text-lg shadow-xl shadow-slate-200 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:["PROCESAR COBRO ",e.jsx($,{size:20})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col p-8 gap-8 overflow-hidden bg-white",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx(R,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-purple-600 transition-colors",size:20}),e.jsx("input",{type:"text",value:p,onChange:t=>D(t.target.value),placeholder:"Busca productos por nombre o código...",className:"w-full bg-[#F5F5F7] border-none rounded-3xl py-5 pl-14 pr-6 focus:ring-4 focus:ring-purple-100 text-sm font-bold placeholder:text-slate-300 transition-all"})]}),e.jsx("button",{className:"p-5 bg-white border border-slate-100 rounded-3xl text-slate-500 hover:bg-slate-50 transition shadow-sm",children:e.jsx(ue,{size:22})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto pr-2 pb-8 scrollbar-hide",children:e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:P.map(t=>e.jsxs("button",{onClick:()=>K(t),className:"text-left bg-white border border-slate-100 p-5 rounded-[2.5rem] hover:border-purple-600 hover:shadow-2xl hover:shadow-purple-100 transition-all group flex flex-col h-full active:scale-95",children:[e.jsxs("div",{className:"aspect-square bg-slate-50 rounded-[2rem] mb-5 flex items-center justify-center group-hover:bg-purple-50 transition-colors overflow-hidden relative",children:[e.jsx(v,{className:"text-slate-200 group-hover:text-purple-300 transition-colors",size:64,strokeWidth:1}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),e.jsx("h3",{className:"text-[11px] font-black text-slate-900 mb-2 flex-1 leading-relaxed uppercase tracking-tight",children:t.nombre}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("span",{className:"text-base font-black text-purple-600 font-mono",children:["$",Number(t.precio_venta||t.precio_produccion||0).toFixed(2)]}),e.jsx("div",{className:"w-10 h-10 bg-slate-900 rounded-2xl flex items-center justify-center text-white opacity-0 group-hover:opacity-100 transition-all transform translate-y-2 group-hover:translate-y-0 shadow-lg shadow-purple-200",children:e.jsx(M,{size:20})})]})]},t.id))})})]})]})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-6 animate-in fade-in duration-300",children:e.jsxs("div",{className:"w-full max-w-4xl bg-white rounded-[3rem] shadow-2xl overflow-hidden flex animate-in zoom-in duration-300",children:[e.jsxs("div",{className:"w-1/3 bg-slate-900 p-12 flex flex-col justify-between text-white",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mb-10",children:"Resumen de Pago"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"p-8 bg-white/5 rounded-[2rem] border border-white/10 backdrop-blur-md",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 text-center",children:"Importe Neto"}),e.jsxs("p",{className:"text-4xl font-black text-center font-mono",children:["$",Number(d).toFixed(2)]})]}),e.jsxs("div",{className:"space-y-4 px-2",children:[e.jsxs("div",{className:"flex justify-between text-[11px] font-bold text-slate-400 uppercase tracking-tighter",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"text-white",children:["$",Number(b).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-[11px] font-bold text-slate-400 uppercase tracking-tighter",children:[e.jsx("span",{children:"Impuestos"}),e.jsxs("span",{className:"text-white",children:["$",Number(N).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-2xl",children:[e.jsx(Ne,{className:"text-purple-400"}),e.jsxs("div",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest leading-loose",children:["IVA Incluido (7%)",e.jsx("br",{}),"Panamá"]})]})]}),e.jsxs("div",{className:"flex-1 p-12 flex flex-col bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-10",children:[e.jsx("h3",{className:"font-black text-3xl text-slate-900 tracking-tighter",children:"Pasarela de Cobro"}),e.jsx("button",{onClick:()=>j(!1),className:"p-3 hover:bg-slate-100 rounded-2xl transition-colors",children:e.jsx(I,{size:24})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mb-10",children:T.map(t=>e.jsxs("button",{onClick:()=>x({...r,metodo:t.nombre,banco:t.bank_account_id||r.banco}),className:`py-8 rounded-3xl border-2 transition-all flex flex-col items-center gap-4 ${r.metodo===t.nombre?"border-slate-900 bg-slate-900 text-white shadow-2xl shadow-slate-200":"border-slate-100 bg-slate-50 text-slate-400 hover:border-slate-200"}`,children:[t.tipo==="Efectivo"&&e.jsx(oe,{size:28}),t.tipo==="Tarjeta"&&e.jsx(ie,{size:28}),(t.tipo==="Transferencia"||t.tipo==="Electronico")&&e.jsx($,{size:28,className:"rotate-[-45deg]"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest font-mono text-center px-2",children:t.nombre})]},t.id))}),e.jsxs("div",{className:"space-y-8 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4 ml-2",children:"Importe Recibido"}),e.jsxs("div",{className:"relative group",children:[e.jsx("span",{className:"absolute left-8 top-1/2 -translate-y-1/2 text-4xl font-black text-slate-300 group-focus-within:text-purple-200 transition-colors",children:"$"}),e.jsx("input",{type:"number",value:r.recibido,onChange:t=>x({...r,recibido:t.target.value}),className:"w-full bg-[#F5F5F7] border-none rounded-[2rem] py-8 pl-16 pr-8 text-5xl font-black text-slate-900 focus:ring-0 font-mono transition-all",autoFocus:!0})]})]}),r.metodo!=="Efectivo"&&e.jsxs("div",{className:"grid grid-cols-2 gap-6 animate-in slide-in-from-top-4 duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 ml-2",children:"Banco Destino"}),e.jsx("select",{className:"w-full bg-[#F5F5F7] border-none rounded-2xl py-5 px-6 font-black text-sm uppercase tracking-tight",value:r.banco,onChange:t=>x({...r,banco:t.target.value}),children:f.map(t=>e.jsxs("option",{value:t.id,children:[t.nombre_banco," - ",t.numero_cuenta]},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3 ml-2",children:"Nº de Referencia / TXN"}),e.jsx("input",{type:"text",value:r.referencia,onChange:t=>x({...r,referencia:t.target.value}),className:"w-full bg-[#F5F5F7] border-none rounded-2xl py-5 px-6 font-black text-sm placeholder:text-slate-300 uppercase",placeholder:"Ej: ACH-990234"})]})]}),e.jsxs("div",{className:"mt-auto pt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"pl-4",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Cambio a entregar"}),e.jsxs("p",{className:`text-4xl font-black font-mono transition-colors ${z>=0?"text-green-600":"text-red-400"}`,children:["$",Number(Math.max(0,z)).toFixed(2)]})]}),e.jsxs("button",{onClick:ee,disabled:r.recibido<d&&r.metodo==="Efectivo"&&d>0,className:"bg-slate-900 hover:bg-black text-white px-12 py-7 rounded-[2rem] font-black text-lg flex items-center gap-4 transition-all active:scale-95 shadow-2xl shadow-slate-200 disabled:opacity-30",children:["FINALIZAR OPERACIÓN ",e.jsx(de,{size:24})]})]})]})]})]})}),V&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-6 animate-in fade-in",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-[3rem] shadow-2xl flex flex-col max-h-[85vh] overflow-hidden animate-in zoom-in duration-300",children:[e.jsxs("div",{className:"p-10 border-b border-slate-100 flex items-center justify-between bg-slate-50",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-2xl text-slate-900 tracking-tighter",children:"Ordenes Pendientes"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Sincronización con sistema de ventas"})]}),e.jsx("button",{onClick:()=>g(!1),className:"p-3 hover:bg-white rounded-2xl shadow-sm transition-all",children:e.jsx(I,{size:20})})]}),e.jsxs("div",{className:"p-10 flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"relative mb-10",children:[e.jsx(R,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-400",size:20}),e.jsx("input",{type:"text",value:_,onChange:t=>X(t.target.value),onKeyUp:()=>G(),placeholder:"Número de orden, cliente o token...",className:"w-full bg-[#F5F5F7] border-none rounded-[2rem] py-5 pl-16 pr-8 focus:ring-4 focus:ring-purple-100 text-sm font-black transition-all"})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto pr-4 custom-scrollbar",children:[F.map(t=>e.jsxs("button",{onClick:()=>Y(t),className:"w-full text-left p-6 bg-white border-2 border-slate-50 hover:border-purple-600 rounded-[2.5rem] transition-all flex items-center justify-between group group/card shadow-sm hover:shadow-xl hover:shadow-purple-50",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400 group-hover/card:bg-purple-600 group-hover/card:text-white transition-all",children:e.jsx(he,{size:24})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-black text-slate-900 tracking-tight leading-none mb-2 underline decoration-purple-200 underline-offset-4",children:["#",t.numero_orden]}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:t.cliente.razon_social})]})]}),e.jsxs("div",{className:"text-right bg-slate-50 group-hover/card:bg-purple-50 px-6 py-4 rounded-3xl transition-colors",children:[e.jsxs("p",{className:"text-xl font-black text-purple-600 font-mono tracking-tighter leading-none mb-1",children:["$",Number(t.total_num-(t.abonado_num||0)).toFixed(2)]}),e.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:["Monto: $",Number(t.total_num).toFixed(2)]}),e.jsxs("p",{className:"text-[9px] font-black text-green-500 uppercase tracking-widest block",children:["Abono: $",Number(t.abonado_num||0).toFixed(2)]})]})]},t.id)),F.length===0&&e.jsxs("div",{className:"text-center py-20 bg-slate-50 rounded-[3rem] border-2 border-dashed border-slate-100",children:[e.jsx(E,{size:64,className:"mx-auto mb-6 text-slate-200"}),e.jsx("p",{className:"text-xs font-black tracking-[0.2em] uppercase text-slate-400",children:"Sin resultados"})]})]})]})]})}),H&&o&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-xl z-[100] flex items-center justify-center p-6 animate-in fade-in duration-500",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-[3.5rem] shadow-2xl overflow-hidden animate-in slide-in-from-bottom-12 duration-500",children:[e.jsxs("div",{className:"bg-slate-900 p-12 text-white text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-purple-600/20 blur-[60px] rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-3xl font-black tracking-tighter mb-2",children:"CORTE DE CAJA PARCIAL"}),e.jsxs("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] font-mono opacity-80",children:[new Date().toLocaleDateString("es-PA")," | ",new Date().toLocaleTimeString("es-PA")]})]})]}),e.jsxs("div",{className:"p-12 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-slate-50 font-black text-[11px] uppercase text-slate-400 tracking-widest",children:[e.jsx("span",{children:"Saldo Apertura"}),e.jsxs("span",{className:"text-slate-900",children:["$",Number(o.apertura).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-slate-50 font-black text-[11px] uppercase text-slate-400 tracking-widest",children:[e.jsx("span",{children:"Ventas en Efectivo"}),e.jsxs("span",{className:"text-green-600",children:["+ $",Number(o.ventas_efectivo).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 border-b border-slate-50 font-black text-[11px] uppercase text-slate-400 tracking-widest",children:[e.jsx("span",{children:"Retiros Realizados"}),e.jsxs("span",{className:"text-red-500",children:["- $",Number(o.salidas).toFixed(2)]})]}),e.jsxs("div",{className:"py-10 text-center bg-[#F5F5F7] rounded-[2.5rem] mt-8 border border-slate-100",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Efectivo Esperado en Caja"}),e.jsxs("p",{className:"text-6xl font-black text-slate-900 tracking-tighter font-mono",children:["$",Number(o.apertura+o.ventas_efectivo-o.salidas).toFixed(2)]})]}),e.jsxs("div",{className:"pt-8 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-6 bg-purple-50 rounded-3xl border border-purple-100/50",children:[e.jsx("p",{className:"text-[9px] font-black text-purple-400 uppercase tracking-widest mb-2",children:"Tarjeta (Elect.)"}),e.jsxs("p",{className:"text-xl font-black text-purple-700 font-mono tracking-tighter",children:["$",Number(o.ventas_tarjeta).toFixed(2)]})]}),e.jsxs("div",{className:"p-6 bg-blue-50 rounded-3xl border border-blue-100/50",children:[e.jsx("p",{className:"text-[9px] font-black text-blue-400 uppercase tracking-widest mb-2",children:"Transferencias"}),e.jsxs("p",{className:"text-xl font-black text-blue-700 font-mono tracking-tighter",children:["$",Number(o.ventas_transferencia).toFixed(2)]})]})]})]}),e.jsxs("div",{className:"p-12 bg-slate-50 border-t border-slate-100 flex gap-6",children:[e.jsx("button",{onClick:()=>window.print(),className:"flex-1 bg-white border border-slate-200 py-5 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-white hover:shadow-lg transition-all active:scale-95 shadow-sm",children:"Generar Vale"}),e.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-slate-900 text-white py-5 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-black transition-all active:scale-95 shadow-xl shadow-slate-200",children:"Entendido"})]})]})})]})}export{Pe as default};
