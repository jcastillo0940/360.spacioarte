import{j as e,H as y,b as f}from"./app-BqyPfEI0.js";import{A as N}from"./AuthenticatedLayout-ChjIDkpR.js";import{A as b}from"./arrow-left-BzKnOsJ1.js";import{c as w}from"./createLucideIcon-DrM2Vc-y.js";import{C as v}from"./calendar-wzzDl4jw.js";import{F as j}from"./file-text-BCcjzgTR.js";import{F as _}from"./file-minus-6DbKOdty.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],F=w("building-2",k);function L({auth:u,operacion:a}){var m,o,h,p,g;const i=a.tipo==="venta",d=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(t||0));return e.jsxs(N,{user:u.user,children:[e.jsx(y,{title:`Operación ${a.numero_operacion}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-5xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>f.visit("/finanzas/factoring"),className:"text-gray-600 hover:text-gray-900 transition",children:e.jsx(b,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a.numero_operacion}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i?"Factoring de Venta (Agrupado)":"Factoring de Compra (Agrupado)"})]})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${a.estado==="Activa"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.estado})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-gray-500"}),"Información General"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 block mb-1",children:"Fecha"}),e.jsxs("p",{className:"font-medium text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-gray-400"}),new Date(a.fecha_operacion).toLocaleDateString("es-PA")]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 block mb-1",children:"Entidad Financiera"}),e.jsx("p",{className:"font-medium text-gray-900",children:a.entidad_financiera||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 block mb-1",children:"Cuenta Bancaria"}),e.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[(m=a.cuenta_bancaria)==null?void 0:m.nombre_banco,e.jsx("br",{}),e.jsx("span",{className:"text-gray-500",children:(o=a.cuenta_bancaria)==null?void 0:o.numero_cuenta})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 block mb-1",children:"Ref. Externa"}),e.jsx("p",{className:"font-medium text-gray-900",children:a.numero_operacion_externa||"N/A"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border-l-4 border-gray-400",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Monto Documentos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(a.monto_factura)})]}),e.jsxs("div",{className:`bg-white p-6 rounded-lg shadow-sm border-l-4 ${i?"border-orange-500":"border-green-500"}`,children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[i?"Costo Financiero":"Descuento Obtenido"," (",parseFloat(a.porcentaje),"%)"]}),e.jsxs("p",{className:`text-2xl font-bold ${i?"text-orange-600":"text-green-600"}`,children:[i?"-":"+",d(a.monto_descuento)]})]}),e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-sm text-white",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:["Total ",i?"Recibido":"Pagado"]}),e.jsx("p",{className:"text-2xl font-bold",children:d(a.monto_neto)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden mb-6",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Documentos Agrupados"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tercero"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Emisión"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Monto Original"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[(h=a.documentos)==null?void 0:h.filter(t=>t.factura_compra_id).map((t,x)=>{var s,r,c,l,n;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 text-green-500 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:(s=t.factura_compra)==null?void 0:s.numero_factura_proveedor})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(c=(r=t.factura_compra)==null?void 0:r.proveedor)==null?void 0:c.razon_social}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(l=t.factura_compra)==null?void 0:l.fecha_emision}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:d((n=t.factura_compra)==null?void 0:n.total)})]},`fc-${x}`)}),(p=a.documentos)==null?void 0:p.filter(t=>t.factura_venta_id).map((t,x)=>{var s,r,c,l,n;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 text-orange-500 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:(s=t.factura_venta)==null?void 0:s.numero_factura})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(c=(r=t.factura_venta)==null?void 0:r.cliente)==null?void 0:c.razon_social}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(l=t.factura_venta)==null?void 0:l.fecha_emision}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:d((n=t.factura_venta)==null?void 0:n.total)})]},`fv-${x}`)}),(g=a.documentos)==null?void 0:g.filter(t=>t.nota_credito_id).map((t,x)=>{var s,r,c,l,n;return e.jsxs("tr",{className:"bg-red-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 text-red-500 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:(s=t.nota_credito)==null?void 0:s.numero_nota})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(c=(r=t.nota_credito)==null?void 0:r.cliente)==null?void 0:c.razon_social}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(l=t.nota_credito)==null?void 0:l.fecha}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-700 text-right font-medium",children:["-",d((n=t.nota_credito)==null?void 0:n.total)]})]},`nc-${x}`)})]})]})})]}),a.notas&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Notas internas:"}),e.jsx("p",{className:"text-sm text-yellow-700",children:a.notas})]})]})})]})}export{L as default};
