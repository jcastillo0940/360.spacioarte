import{r as o,u as N,j as e,H as y}from"./app-BfpvEa9J.js";import{A as w}from"./AuthenticatedLayout-BAkMyy8i.js";function _(){const[l,u]=o.useState([]),[m,p]=o.useState(!0),[r,n]=o.useState(null),{data:a,setData:t,post:b,put:h,processing:g,reset:d,errors:c}=N({nombre:"",apellido:"",cedula:"",email:"",telefono:"",fecha_ingreso:new Date().toISOString().split("T")[0],tipo_contrato:"Indefinido",salario_base:"",puesto_id:null,banco_nombre:"",banco_cuenta:""});o.useEffect(()=>{i()},[]);const i=()=>{fetch("/api/rrhh/empleados").then(s=>s.json()).then(s=>{u(s),p(!1)})},f=s=>{s.preventDefault(),r?h(`/rrhh/empleados/${r}`,{onSuccess:()=>{d(),n(null),i()}}):b("/rrhh/empleados",{onSuccess:()=>{d(),i()}})},j=s=>{t(s),n(s.id)},x=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return e.jsxs(w,{children:[e.jsx(y,{title:"Gestión de Personal"}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),"Gestión de Personal"]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Administración de empleados y colaboradores"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase",children:"Total Empleados"}),e.jsx("div",{className:"text-3xl font-black text-slate-900 mt-2",children:l.length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase",children:"Activos"}),e.jsx("div",{className:"text-3xl font-black text-green-600 mt-2",children:l.filter(s=>s.activo).length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase",children:"Permanentes"}),e.jsx("div",{className:"text-3xl font-black text-blue-600 mt-2",children:l.filter(s=>s.tipo_contrato==="Indefinido").length})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase",children:"Nómina Mensual"}),e.jsx("div",{className:"text-3xl font-black text-slate-900 mt-2",children:x(l.reduce((s,v)=>s+parseFloat(v.salario_base||0),0))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[e.jsxs("form",{onSubmit:f,className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 h-fit",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:r?"Editar Empleado":"Nuevo Empleado"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Nombre"}),e.jsx("input",{type:"text",value:a.nombre,onChange:s=>t("nombre",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Apellido"}),e.jsx("input",{type:"text",value:a.apellido,onChange:s=>t("apellido",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Cédula"}),e.jsx("input",{type:"text",value:a.cedula,onChange:s=>t("cedula",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",placeholder:"X-XXX-XXXX",required:!0}),c.cedula&&e.jsx("span",{className:"text-red-500 text-xs",children:c.cedula})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>t("email",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Tipo de Contrato"}),e.jsxs("select",{value:a.tipo_contrato,onChange:s=>t("tipo_contrato",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"Indefinido",children:"Indefinido"}),e.jsx("option",{value:"Definido",children:"Definido"}),e.jsx("option",{value:"Servicios Profesionales",children:"Servicios Profesionales"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Salario Base"}),e.jsx("input",{type:"number",step:"0.01",value:a.salario_base,onChange:s=>t("salario_base",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Fecha Ingreso"}),e.jsx("input",{type:"date",value:a.fecha_ingreso,onChange:s=>t("fecha_ingreso",s.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:g,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition",children:r?"Actualizar":"Guardar"}),r&&e.jsx("button",{type:"button",onClick:()=>{d(),n(null)},className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-lg font-bold hover:bg-slate-300 transition",children:"Cancelar"})]})]})]}),e.jsx("div",{className:"xl:col-span-3 bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:m?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-slate-600 mt-4",children:"Cargando empleados..."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Empleado"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Cédula"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Contrato"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold uppercase",children:"Salario"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold uppercase",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:l.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center text-slate-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("p",{className:"text-lg font-bold",children:"No hay empleados registrados"}),e.jsx("p",{className:"text-sm mt-2",children:"Comienza agregando tu primer empleado"})]})}):l.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("div",{className:"font-bold text-slate-900",children:[s.nombre," ",s.apellido]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["Ingreso: ",new Date(s.fecha_ingreso).toLocaleDateString("es-PA")]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-slate-900",children:s.cedula})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${s.tipo_contrato==="Servicios Profesionales"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:s.tipo_contrato})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("span",{className:"font-bold text-blue-600",children:x(s.salario_base)})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`w-3 h-3 rounded-full inline-block ${s.activo?"bg-green-500":"bg-red-500"}`})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("button",{onClick:()=>j(s),className:"px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition font-bold text-sm inline-flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]})})]},s.id))})]})})})]})]})]})}export{_ as default};
