import{r as a,j as e,H as l,L as m}from"./app-BfpvEa9J.js";import{A as d}from"./AuthenticatedLayout-BAkMyy8i.js";function N({ordenId:n}){var o,i,x;const[t,p]=a.useState(null),[j,c]=a.useState(!0);a.useEffect(()=>{fetch(`/api/compras/ordenes/${n}`).then(s=>s.json()).then(s=>{p(s),c(!1)}).catch(s=>{console.error("Error loading orden:",s),c(!1)})},[n]);const r=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return j?e.jsxs(d,{children:[e.jsx(l,{title:"Cargando..."}),e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),e.jsx("p",{className:"text-slate-600 mt-4",children:"Cargando orden..."})]})})]}):t?e.jsxs(d,{children:[e.jsx(l,{title:"Orden de Compra"}),e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx(m,{href:"/compras/ordenes",className:"text-blue-600 mb-4 inline-block",children:"Volver"}),e.jsxs("h1",{className:"text-3xl font-black mb-4",children:["Orden ",t.numero_orden]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Proveedor"}),e.jsx("p",{className:"font-bold",children:(o=t.proveedor)==null?void 0:o.razon_social}),e.jsx("p",{className:"text-sm text-slate-500",children:(i=t.proveedor)==null?void 0:i.identificacion}),e.jsxs("p",{className:"mt-4",children:["Fecha: ",new Date(t.fecha_emision).toLocaleDateString()]}),e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:`/compras/ordenes/${t.id}/pdf`,target:"_blank",className:"px-4 py-2 bg-red-600 text-white rounded",children:"PDF"})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:"Producto"}),e.jsx("th",{className:"px-6 py-3 text-center",children:"Cantidad"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Costo"}),e.jsx("th",{className:"px-6 py-3 text-right",children:"Total"})]})}),e.jsx("tbody",{children:(x=t.detalles)==null?void 0:x.map(s=>{var h;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:(h=s.item)==null?void 0:h.nombre}),e.jsx("td",{className:"px-6 py-4 text-center",children:s.cantidad}),e.jsx("td",{className:"px-6 py-4 text-right",children:r(s.costo_unitario)}),e.jsx("td",{className:"px-6 py-4 text-right",children:r(s.total)})]},s.id)})}),e.jsx("tfoot",{className:"bg-slate-900 text-white",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-6 py-4 text-right font-bold",children:"Total:"}),e.jsx("td",{className:"px-6 py-4 text-right font-bold",children:r(t.total)})]})})]})})]})]}):e.jsxs(d,{children:[e.jsx(l,{title:"Error"}),e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-12 text-center",children:[e.jsx("p",{className:"text-red-600 font-bold",children:"Orden no encontrada"}),e.jsx(m,{href:"/compras/ordenes",className:"text-blue-600 mt-4 inline-block",children:"Volver"})]})})]})}export{N as default};
