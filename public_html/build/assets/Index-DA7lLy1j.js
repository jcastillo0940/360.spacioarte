import{r as j,u as f,j as e,H as g}from"./app-DUrg3GOp.js";import{A as N}from"./AuthenticatedLayout-C3zTQCkg.js";import{L as v}from"./layers-CUxeG4NR.js";import{P as w}from"./plus-DXn2Uwyo.js";import{P as y}from"./printer-CH-fSnZG.js";import{C as P}from"./circle-check-big-CAA8OcLA.js";import"./createLucideIcon-BwXySn9r.js";function O({pendientes:l,pliegos:c,papeles:n}){const[a,r]=j.useState([]),{data:o,setData:i,post:d,processing:x,reset:m}=f({item_id:"",ordenes:[]}),h=s=>{const t=a.includes(s)?a.filter(p=>p!==s):[...a,s];r(t),i("ordenes",t)},u=s=>{s.preventDefault(),d(route("produccion.pliegos.store"),{onSuccess:()=>{r([]),m()}})},b=s=>{confirm("¿Confirmar impresión? Esto enviará las tareas a las máquinas finales.")&&d(route("produccion.pliegos.imprimir",s))};return e.jsxs(N,{children:[e.jsx(g,{title:"Gestión de Pliegos (Nesting)"}),e.jsx("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-slate-50 border-b flex justify-between items-center",children:[e.jsxs("h2",{className:"font-black text-slate-800 flex items-center gap-2",children:[e.jsx(v,{size:20})," ÓRDENES EN COLA DE IMPRESIÓN"]}),e.jsxs("span",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold",children:[l.length," Pendientes"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase text-[10px] font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left",children:"Selección"}),e.jsx("th",{className:"p-4 text-left",children:"Orden / Cliente"}),e.jsx("th",{className:"p-4 text-left",children:"Producto"}),e.jsx("th",{className:"p-4 text-center",children:"Cant."})]})}),e.jsx("tbody",{className:"divide-y",children:l.map(s=>{var t;return e.jsxs("tr",{className:a.includes(s.id)?"bg-blue-50":"",children:[e.jsx("td",{className:"p-4 text-center",children:e.jsx("input",{type:"checkbox",checked:a.includes(s.id),onChange:()=>h(s.id),className:"rounded border-slate-300 text-blue-600 w-5 h-5"})}),e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"font-bold",children:["#",s.venta.numero_orden]}),e.jsx("div",{className:"text-slate-400 text-xs",children:s.venta.cliente.razon_social})]}),e.jsx("td",{className:"p-4 font-medium uppercase",children:(t=s.materia_prima)==null?void 0:t.nombre}),e.jsx("td",{className:"p-4 text-center font-bold",children:s.cantidad})]},s.id)})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border-2 border-blue-100",children:[e.jsxs("h3",{className:"font-black text-slate-900 mb-4 flex items-center gap-2 text-lg uppercase",children:[e.jsx(w,{size:24,className:"text-blue-600"})," Armar Nuevo Pliego"]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Papel / Soporte"}),e.jsxs("select",{className:"w-full border-slate-200 rounded-xl font-bold",value:o.item_id,onChange:s=>i("item_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione material..."}),n.map(s=>e.jsx("option",{value:s.id,children:s.nombre},s.id))]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl",children:e.jsxs("p",{className:"text-blue-700 font-bold text-sm",children:["Órdenes seleccionadas: ",a.length]})}),e.jsx("button",{disabled:x||a.length===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-xl shadow-lg shadow-blue-100 disabled:opacity-50",children:"CREAR PLIEGO [NESTING]"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-900 text-white flex justify-between items-center",children:e.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[e.jsx(y,{size:18})," ÚLTIMOS PLIEGOS"]})}),e.jsx("div",{className:"divide-y",children:c.map(s=>{var t;return e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("span",{className:"font-black text-slate-800",children:["PLIEGO #",s.id]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase ${s.estado==="Impreso"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.estado})]}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:(t=s.materia_prima)==null?void 0:t.nombre}),s.estado==="Pendiente"&&e.jsxs("button",{onClick:()=>b(s.id),className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-bold text-xs flex items-center justify-center gap-2 uppercase tracking-tighter",children:[e.jsx(P,{size:14})," Marcar como Impreso"]})]},s.id)})})]})]})]})})]})}export{O as default};
