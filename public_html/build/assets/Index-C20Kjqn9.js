import{r as j,u as f,j as e,H as g}from"./app-3DoqhR_o.js";import{A as N}from"./AuthenticatedLayout-314zbiSn.js";import{c as v}from"./createLucideIcon-BNyQ3YPG.js";import{P as w}from"./plus-Cp2WWDGq.js";import{P as y}from"./printer-BuKLJ5PB.js";import{C as k}from"./circle-check-big-LPXb57_K.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],E=v("layers",P);function A({pendientes:l,pliegos:c,papeles:n}){const[a,r]=j.useState([]),{data:o,setData:i,post:d,processing:x,reset:m}=f({item_id:"",ordenes:[]}),h=s=>{const t=a.includes(s)?a.filter(b=>b!==s):[...a,s];r(t),i("ordenes",t)},u=s=>{s.preventDefault(),d(route("produccion.pliegos.store"),{onSuccess:()=>{r([]),m()}})},p=s=>{confirm("¿Confirmar impresión? Esto enviará las tareas a las máquinas finales.")&&d(route("produccion.pliegos.imprimir",s))};return e.jsxs(N,{children:[e.jsx(g,{title:"Gestión de Pliegos (Nesting)"}),e.jsx("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-slate-50 border-b flex justify-between items-center",children:[e.jsxs("h2",{className:"font-black text-slate-800 flex items-center gap-2",children:[e.jsx(E,{size:20})," ÓRDENES EN COLA DE IMPRESIÓN"]}),e.jsxs("span",{className:"bg-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold",children:[l.length," Pendientes"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 uppercase text-[10px] font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left",children:"Selección"}),e.jsx("th",{className:"p-4 text-left",children:"Orden / Cliente"}),e.jsx("th",{className:"p-4 text-left",children:"Producto"}),e.jsx("th",{className:"p-4 text-center",children:"Cant."})]})}),e.jsx("tbody",{className:"divide-y",children:l.map(s=>{var t;return e.jsxs("tr",{className:a.includes(s.id)?"bg-blue-50":"",children:[e.jsx("td",{className:"p-4 text-center",children:e.jsx("input",{type:"checkbox",checked:a.includes(s.id),onChange:()=>h(s.id),className:"rounded border-slate-300 text-blue-600 w-5 h-5"})}),e.jsxs("td",{className:"p-4",children:[e.jsxs("div",{className:"font-bold",children:["#",s.venta.numero_orden]}),e.jsx("div",{className:"text-slate-400 text-xs",children:s.venta.cliente.razon_social})]}),e.jsx("td",{className:"p-4 font-medium uppercase",children:(t=s.materia_prima)==null?void 0:t.nombre}),e.jsx("td",{className:"p-4 text-center font-bold",children:s.cantidad})]},s.id)})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border-2 border-blue-100",children:[e.jsxs("h3",{className:"font-black text-slate-900 mb-4 flex items-center gap-2 text-lg uppercase",children:[e.jsx(w,{size:24,className:"text-blue-600"})," Armar Nuevo Pliego"]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Tipo de Papel / Soporte"}),e.jsxs("select",{className:"w-full border-slate-200 rounded-xl font-bold",value:o.item_id,onChange:s=>i("item_id",s.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Seleccione material..."}),n.map(s=>e.jsx("option",{value:s.id,children:s.nombre},s.id))]})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-xl",children:e.jsxs("p",{className:"text-blue-700 font-bold text-sm",children:["Órdenes seleccionadas: ",a.length]})}),e.jsx("button",{disabled:x||a.length===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-black py-4 rounded-xl shadow-lg shadow-blue-100 disabled:opacity-50",children:"CREAR PLIEGO [NESTING]"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-900 text-white flex justify-between items-center",children:e.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[e.jsx(y,{size:18})," ÚLTIMOS PLIEGOS"]})}),e.jsx("div",{className:"divide-y",children:c.map(s=>{var t;return e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("span",{className:"font-black text-slate-800",children:["PLIEGO #",s.id]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-black uppercase ${s.estado==="Impreso"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.estado})]}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:(t=s.materia_prima)==null?void 0:t.nombre}),s.estado==="Pendiente"&&e.jsxs("button",{onClick:()=>p(s.id),className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-bold text-xs flex items-center justify-center gap-2 uppercase tracking-tighter",children:[e.jsx(k,{size:14})," Marcar como Impreso"]})]},s.id)})})]})]})]})})]})}export{A as default};
