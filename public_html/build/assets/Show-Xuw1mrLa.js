import{r,P as Q,a as l,j as e,H as I,b as Y}from"./app-B9gv8ZBn.js";import{c as Z}from"./createLucideIcon-CS3OZA2G.js";import{C as ee}from"./chevron-right-DqVajgh1.js";import{P as se}from"./package-BT2Ejofb.js";import{C as B}from"./circle-check-big-DI7VEtmR.js";import{C as O}from"./circle-alert-DtSl5zSQ.js";import{F as te}from"./file-text-giW9wa2H.js";import{C as h}from"./circle-x-C-wfysMX.js";import{C as ae}from"./credit-card-DBqbDYo8.js";import{C as re}from"./clock-DcFQkxZp.js";import{M as C}from"./message-square-Bvj4H8n0.js";import{S as ie}from"./send-Dv3R9Olp.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],ne=Z("cloud-upload",oe);function ve({orden:t,max_intentos:S}){var T;const[c,P]=r.useState([]),[u,D]=r.useState(""),[L,z]=r.useState(!1),[p,E]=r.useState(""),[f,b]=r.useState(!1),[j,y]=r.useState(!1),[A,H]=r.useState(null),[v,U]=r.useState(!1),[F,N]=r.useState(!1),R=r.useRef(null),G=()=>{var s;return(s=R.current)==null?void 0:s.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{G()},[c]),r.useEffect(()=>{if(!(t!=null&&t.tracking_token))return;"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission();const s=new Q("cbd8be0eaf6853d5161c",{cluster:"mt1",forceTLS:!0,enabledTransports:["ws","wss"]}),a=s.subscribe(`chat.${t.tracking_token}`),o=s.subscribe("orders");return a.bind("nuevo-mensaje",function(g){const n=g.mensaje||g;n.emisor==="staff"&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Nuevo mensaje de SpacioArte",{body:n.texto,icon:"/logo.png"}),P(_=>_.some(m=>m.id&&m.id===n.id||m.texto===n.texto&&m.created_at===n.created_at&&m.emisor===n.emisor)?_:[..._,n])}),o.bind("OrderStateChanged",function(g){g.id===t.id&&l.reload({only:["orden"]})}),()=>{s.unsubscribe(`chat.${t.tracking_token}`),s.unsubscribe("orders"),s.disconnect()}},[t==null?void 0:t.tracking_token,t==null?void 0:t.id]);const $=async s=>{if(s.preventDefault(),!u)return;z(!0);const a={id:Date.now(),texto:u,emisor:"cliente",created_at:new Date().toISOString(),requiere_aprobacion:!1};P(o=>[...o,a]);try{await Y.post("/api/ventas/enviar-chat",{mensaje:a,token:t.tracking_token}),D("")}catch(o){console.error("Falla al enviar mensaje a Pusher:",o)}finally{z(!1)}},W=()=>{confirm("¿Estás seguro de que deseas APROBAR este diseño? Una vez aprobado, tu orden pasará a producción y no se podrán hacer cambios.")&&l.post(`/tracking/${t.tracking_token}/approve`,{},{preserveScroll:!0})},K=s=>{s.preventDefault(),p&&l.post(`/tracking/${t.tracking_token}/reject`,{comentarios:p},{preserveScroll:!0,onSuccess:()=>{b(!1),E("")}})},V=()=>{confirm("Hemos alcanzado el límite de 3 revisiones gratuitas. Para continuar con nuevas versiones, se aplicarán las tarifas de diseño por hora. ¿Deseas aprobar el cobro para solicitar la Rev #4?")&&l.post(`/tracking/${t.tracking_token}/approve-billing`,{},{preserveScroll:!0,onSuccess:()=>b(!0)})},J=s=>{if(s.preventDefault(),!A||!v){alert("Por favor adjunta el diseño y acepta los términos de responsabilidad.");return}const a=new FormData;a.append("archivo",A),N(!0),l.post(`/tracking/${t.tracking_token}/own-design`,a,{onSuccess:()=>N(!1),onError:()=>N(!1),forceFormData:!0})},d=s=>s==null?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s),[x,q]=r.useState(!1),[i,M]=r.useState({brief_cliente:"",archivo:null}),[w,k]=r.useState(!1);if(t&&t.cliente_envia_archivo&&!t.brief_cliente){const s=a=>{if(a.preventDefault(),!i.brief_cliente||!i.archivo){alert("Por favor complete la descripción y adjunte un archivo para continuar.");return}const o=new FormData;o.append("brief_cliente",i.brief_cliente),o.append("archivo",i.archivo),k(!0),l.post(`/tracking/${t.tracking_token}/brief`,o,{onSuccess:()=>k(!1),onError:()=>k(!1),forceFormData:!0})};return e.jsxs("div",{className:"min-h-screen bg-[#F5F5F7] flex items-center justify-center p-4 md:p-8 selection:bg-blue-200",children:[e.jsx(I,{title:`Acción Requerida - Orden #${t.numero_orden}`}),e.jsx("div",{className:"max-w-xl w-full bg-white/80 backdrop-blur-2xl border border-white/40 rounded-[2.5rem] shadow-[0_20px_40px_-15px_rgba(0,0,0,0.05)] overflow-hidden transition-all duration-500 transform hover:shadow-[0_30px_60px_-15px_rgba(0,0,0,0.1)]",children:e.jsxs("div",{className:"p-10 md:p-12",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-8 shadow-sm",children:e.jsx(ne,{size:32,strokeWidth:1.5})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-gray-900 tracking-tight mb-2",children:"Comencemos tu proyecto"}),e.jsx("p",{className:"text-gray-500 text-sm mb-10 leading-relaxed",children:"Necesitamos tus ideas y archivos de referencia para que nuestro equipo de diseño empiece a crear la magia."}),e.jsxs("form",{onSubmit:s,className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider",children:"1. Instrucciones de diseño"}),e.jsx("textarea",{className:"w-full bg-gray-50/50 border border-gray-200 rounded-2xl p-4 text-sm text-gray-800 focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all resize-none h-32",placeholder:"Colores, textos, ideas específicas...",value:i.brief_cliente,onChange:a=>M({...i,brief_cliente:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2. Archivos de referencia"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"file",onChange:a=>M({...i,archivo:a.target.files[0]}),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",required:!0}),e.jsxs("div",{className:"bg-gray-50/50 border-2 border-dashed border-gray-200 rounded-2xl p-8 text-center group-hover:bg-blue-50/50 group-hover:border-blue-300 transition-colors duration-300",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 truncate px-4",children:i.archivo?i.archivo.name:"Haz clic o arrastra tu archivo aquí"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Max 10MB (PDF, JPG, PNG)"})]})]})]}),e.jsxs("button",{type:"submit",disabled:w,className:"w-full bg-gray-900 text-white py-4 rounded-2xl font-medium text-sm hover:bg-black transition-all duration-300 disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg shadow-gray-900/20",children:[w?"Enviando...":"Iniciar Proyecto",!w&&e.jsx(ee,{size:16})]})]})]})})]})}if(!t)return null;const X=[{label:"Diseño",desc:"Creación y propuesta",active:!0,done:["Diseño","Pre-Prensa","Producción","Terminado","Entregado"].includes(t.estado)||t.estado_diseno==="Enviado"},{label:"Aprobación",desc:"Revisión del cliente",active:["Diseño","Pre-Prensa","Producción","Terminado","Entregado"].includes(t.estado),done:["Pre-Prensa","Producción","Terminado","Entregado"].includes(t.estado)},{label:"Producción",desc:"Impresión y ensamblaje",active:["Pre-Prensa","Producción"].includes(t.estado),done:["Terminado","Entregado"].includes(t.estado)},{label:"Entrega",desc:"Listo para ti",active:t.estado==="Terminado",done:t.estado==="Entregado"}];return e.jsxs("div",{className:"min-h-screen bg-[#F5F5F7] font-sans text-gray-900 selection:bg-blue-200 pb-24",children:[e.jsx(I,{title:`Orden #${t.numero_orden}`}),e.jsx("header",{className:"sticky top-0 z-40 bg-white/70 backdrop-blur-xl border-b border-gray-200/50 shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-black rounded-lg flex items-center justify-center text-white",children:e.jsx(se,{size:16,strokeWidth:2})}),e.jsx("span",{className:"font-semibold text-lg tracking-tight",children:"Portal Cliente"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-medium text-gray-500 uppercase tracking-wider",children:"Orden"}),e.jsxs("span",{className:"text-sm font-semibold",children:["#",t.numero_orden]})]})]})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[t.estado_diseno==="Aprobado"&&e.jsxs("div",{className:"mb-8 bg-green-50/80 backdrop-blur-md border border-green-200 p-4 rounded-2xl flex items-center gap-4 transition-all animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500 text-white rounded-full flex items-center justify-center shrink-0 shadow-sm",children:e.jsx(B,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 text-sm",children:"Diseño Aprobado"}),e.jsx("p",{className:"text-xs text-green-600 mt-0.5",children:"Tu pedido ha sido liberado a producción de forma exitosa."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"xl:col-span-8 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-[0_8px_30px_rgb(0,0,0,0.04)] overflow-hidden border border-gray-100",children:[e.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-100 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{children:t.estado_diseno==="Aprobado"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-gray-900",children:"Diseño Final"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Este archivo ya está en proceso de fabricación."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"bg-blue-50 text-blue-600 px-2.5 py-1 rounded-md text-[10px] font-semibold uppercase tracking-wider",children:"Requiere Revisión"}),e.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:["Intento ",t.diseno_intentos," de ",S||3]})]}),e.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-gray-900",children:"Propuesta de Diseño"})]})}),t.estado_diseno==="Enviado"&&!f&&!j&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.diseno_intentos>=(S||3)&&!t.diseno_cobro_aprobado?e.jsxs("button",{onClick:V,className:"px-4 py-2.5 rounded-xl text-xs font-semibold bg-orange-100 text-orange-700 hover:bg-orange-200 transition-colors flex items-center gap-2",children:[e.jsx(O,{size:14})," Solicitar Cambios Extras"]}):e.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2.5 rounded-xl text-xs font-semibold bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",children:"Solicitar Cambios"}),e.jsx("button",{onClick:W,className:"px-6 py-2.5 rounded-xl text-xs font-semibold bg-black text-white shadow-md hover:bg-gray-800 transition-all transform hover:scale-[1.02]",children:"Aprobar Diseño"})]})]}),e.jsx("div",{className:"p-4 md:p-8 bg-gray-50/50 flex justify-center items-center min-h-[400px]",children:["jpg","jpeg","png","gif","webp"].some(s=>{var a;return(a=t.imagen_diseno)==null?void 0:a.toLowerCase().endsWith(s)})?e.jsx("img",{src:`/storage/${t.imagen_diseno}`,alt:"Diseño",className:"max-w-full h-auto rounded-2xl shadow-sm border border-gray-200/60"}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto shadow-sm border border-gray-200",children:e.jsx(te,{size:24,className:"text-gray-400"})}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Archivo de alta resolución"}),e.jsx("a",{href:`/storage/${t.imagen_diseno}`,target:"_blank",className:"inline-block bg-white border border-gray-200 text-gray-800 px-6 py-2 rounded-lg font-medium text-sm hover:bg-gray-50 transition-colors shadow-sm",children:"Descargar / Ver Archivo"})]})}),t.estado_diseno==="Enviado"&&!j&&!f&&e.jsx("div",{className:"bg-white border-t border-gray-100 p-4 text-center",children:e.jsx("button",{onClick:()=>y(!0),className:"text-xs font-medium text-gray-500 hover:text-black transition-colors underline decoration-gray-300 underline-offset-4",children:"¿Prefieres enviar tu propio archivo final?"})})]}),f&&e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 md:p-8 shadow-lg border border-gray-200 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold tracking-tight",children:"Solicitar Cambios"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-800 bg-gray-100 p-2 rounded-full transition-colors",children:e.jsx(h,{size:20})})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsx("textarea",{value:p,onChange:s=>E(s.target.value),placeholder:"Describe los ajustes que necesitas de forma clara...",className:"w-full bg-gray-50 border border-gray-200 rounded-xl p-4 text-sm focus:ring-2 focus:ring-black focus:border-transparent transition-all resize-none h-32",required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"bg-black text-white px-6 py-3 rounded-xl text-sm font-medium hover:bg-gray-800 transition-colors",children:"Enviar Comentarios"})})]})]}),j&&e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 md:p-8 shadow-lg border border-gray-200 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold tracking-tight",children:"Enviar mi propio diseño"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Salta el proceso editorial subiendo tu archivo final."})]}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-800 bg-gray-100 p-2 rounded-full transition-colors",children:e.jsx(h,{size:20})})]}),e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsx("div",{className:"border-2 border-dashed border-gray-200 rounded-2xl p-6 hover:bg-gray-50 transition-colors",children:e.jsx("input",{type:"file",onChange:s=>H(s.target.files[0]),className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200 transition-all cursor-pointer",required:!0})}),e.jsxs("div",{className:"bg-orange-50/50 border border-orange-100 p-4 rounded-xl flex gap-4",children:[e.jsx(O,{size:20,className:"text-orange-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-800 leading-relaxed mb-3",children:"Al enviar su propio diseño, asume la responsabilidad total sobre resolución, ortografía y perfiles de color. SpacioArte no se hace responsable por errores en el archivo original."}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:s=>U(s.target.checked),className:"w-4 h-4 rounded text-black focus:ring-black border-gray-300",required:!0}),e.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Acepto la responsabilidad técnica"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-5 py-3 rounded-xl text-sm font-medium text-gray-600 hover:bg-gray-100 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:F||!v,className:"bg-black text-white px-6 py-3 rounded-xl text-sm font-medium hover:bg-gray-800 transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:F?"Subiendo...":"Enviar Diseño"})]})]})]})]}),e.jsxs("div",{className:"xl:col-span-4 space-y-6",children:[e.jsxs("div",{className:"bg-gray-900 text-white rounded-[2rem] p-6 relative overflow-hidden shadow-lg",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-6 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(ae,{size:16}),e.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",children:"Pago"})]}),e.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold ${t.total-(t.monto_abonado||0)<=0?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:t.total-(t.monto_abonado||0)<=0?"PAGADO":"PENDIENTE"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total a pagar"}),e.jsx("div",{className:"text-4xl font-semibold tracking-tight mb-6",children:d(t.total)}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-white/10",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-wider mb-1",children:"Abonado"}),e.jsx("p",{className:"font-medium text-sm",children:d(t.monto_abonado||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-wider mb-1",children:"Restante"}),e.jsx("p",{className:"font-medium text-sm",children:d(t.total-(t.monto_abonado||0))})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"text-sm font-semibold mb-6 flex items-center gap-2",children:[e.jsx(re,{size:16,className:"text-gray-400"}),"Estado del Proyecto"]}),e.jsx("div",{className:"space-y-6 relative before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-gradient-to-b before:from-transparent before:via-gray-200 before:to-transparent",children:X.map((s,a)=>e.jsxs("div",{className:"relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full border-4 border-white shrink-0 z-10 shadow-sm transition-colors duration-300 ${s.done?"bg-black text-white":s.active?"bg-blue-600 text-white animate-pulse":"bg-gray-100 text-gray-400"}`,children:s.done?e.jsx(B,{size:16}):e.jsx("span",{className:"text-xs font-bold",children:a+1})}),e.jsxs("div",{className:"w-[calc(100%-3rem)] md:w-[calc(50%-2.5rem)] p-3 rounded-xl ml-4 md:ml-0 md:group-odd:mr-4 group-odd:text-right",children:[e.jsx("h4",{className:`text-sm font-semibold ${s.active||s.done?"text-gray-900":"text-gray-400"}`,children:s.label}),e.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:s.desc})]})]},a))})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-5 border-b border-gray-100 bg-gray-50/50",children:e.jsx("h3",{className:"text-sm font-semibold",children:"Detalles del Pedido"})}),e.jsx("div",{className:"p-2",children:(T=t.detalles)==null?void 0:T.map(s=>{var a;return e.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-gray-50 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center text-xs font-semibold text-gray-500",children:[s.cantidad,"x"]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:(a=s.item)==null?void 0:a.nombre}),e.jsxs("div",{className:"text-[10px] text-gray-400",children:[d(s.precio_unitario)," c/u"]})]})]}),e.jsx("div",{className:"font-semibold text-sm",children:d(s.total)})]},s.id)})})]})]})]})]}),e.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-4",children:[x&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-2xl w-[90vw] sm:w-[380px] h-[500px] rounded-[2rem] shadow-[0_20px_40px_-15px_rgba(0,0,0,0.15)] border border-white/50 flex flex-col overflow-hidden animate-in zoom-in-95 duration-200 origin-bottom-right mb-2",children:[e.jsxs("div",{className:"p-4 bg-white/50 border-b border-gray-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-black rounded-full flex items-center justify-center text-white",children:e.jsx(C,{size:14})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold tracking-tight text-gray-900",children:"Soporte SpacioArte"}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-[10px] text-gray-500 font-medium",children:"En línea"})]})]})]}),e.jsx("button",{onClick:()=>q(!1),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-500 transition-colors",children:e.jsx(h,{size:18})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/30",children:[c.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center opacity-50 space-y-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(C,{size:20,className:"text-gray-500"})}),e.jsxs("p",{className:"text-xs font-medium text-gray-500 text-center",children:["Inicia la conversación.",e.jsx("br",{}),"¡Estamos para ayudarte!"]})]}),c.map((s,a)=>e.jsx("div",{className:`flex ${s.emisor==="cliente"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] px-4 py-2.5 rounded-2xl text-sm ${s.emisor==="sistema"?"bg-gray-100 text-gray-600 w-full text-center text-xs font-medium my-2":s.emisor==="cliente"?"bg-blue-600 text-white rounded-br-sm":"bg-gray-100 text-gray-800 rounded-bl-sm border border-gray-200/50"}`,children:[e.jsx("p",{className:"leading-relaxed",children:s.texto}),e.jsx("div",{className:`text-[9px] mt-1 text-right ${s.emisor==="cliente"?"text-blue-200":"text-gray-400"}`,children:new Date(s.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},a)),e.jsx("div",{ref:R})]}),e.jsx("form",{onSubmit:$,className:"p-3 bg-white border-t border-gray-100",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{value:u,onChange:s=>D(s.target.value),placeholder:"Mensaje de iMessage...",className:"w-full bg-gray-100 border-none rounded-full pl-4 pr-12 py-2.5 text-sm focus:ring-2 focus:ring-blue-500/20 transition-all placeholder:text-gray-400",onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),$(s))}}),e.jsx("button",{type:"submit",disabled:!u||L,className:"absolute right-1.5 w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:bg-gray-400",children:e.jsx(ie,{size:14,className:"-ml-0.5"})})]})})]}),e.jsxs("button",{onClick:()=>q(!x),className:`relative w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-105 active:scale-95 ${x?"bg-gray-900 text-white rotate-90":"bg-black text-white hover:bg-gray-800"}`,children:[x?e.jsx(h,{size:24}):e.jsx(C,{size:24,fill:"currentColor"}),!x&&c.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full border-2 border-[#F5F5F7] flex items-center justify-center",children:c.length})]})]})]})}export{ve as default};
