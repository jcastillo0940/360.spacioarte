import{a as $,r as x,u as L,j as e,H as P}from"./app-BqyPfEI0.js";import{A as _}from"./AuthenticatedLayout-ChjIDkpR.js";import{U as j,a as q}from"./users-Dpurxjti.js";import{c as o}from"./createLucideIcon-DrM2Vc-y.js";import{S as v}from"./search-Cu_oT07V.js";import{S as N}from"./square-pen-Ddr3CWTX.js";import{T as D}from"./trash-2-BgCdDlYG.js";import{K as I}from"./key-KdIeC9Gi.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],O=o("check",T);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],H=o("mail",G);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],p=o("shield",B);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],w=o("user-plus",K);function ee({users:m,roles:h}){const{auth:k}=$().props,[y,c]=x.useState(!1),[r,u]=x.useState(null),[n,C]=x.useState(""),{data:a,setData:i,post:z,put:S,delete:A,processing:b,reset:d,errors:t}=L({name:"",email:"",password:"",roles:[]}),g=(s=null)=>{d(),s?(u(s),i({name:s.name,email:s.email,password:"",roles:s.roles.map(l=>l.name)})):u(null),c(!0)},E=s=>{s.preventDefault(),r?S(route("usuarios.update",r.id),{onSuccess:()=>{c(!1),d()}}):z(route("usuarios.store"),{onSuccess:()=>{c(!1),d()}})},M=s=>{confirm(`¿Estás seguro de eliminar al usuario ${s.name}?`)&&A(route("usuarios.destroy",s.id))},R=s=>{const l=[...a.roles];l.includes(s)?i("roles",l.filter(U=>U!==s)):i("roles",[...l,s])},f=m.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase()));return e.jsxs(_,{children:[e.jsx(P,{title:"Gestión de Usuarios y Accesos"}),e.jsxs("div",{className:"max-w-[1400px] mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-50 rounded-full -mr-48 -mt-48 z-0 opacity-40"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-5",children:[e.jsx("div",{className:"p-4 bg-slate-900 rounded-3xl text-white shadow-2xl shadow-slate-300",children:e.jsx(j,{size:32})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Control de Accesos"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-[0.2em] mt-1",children:"Gestión de Usuarios y Roles del Sistema"})]})]}),e.jsxs("button",{onClick:()=>g(),className:"relative z-10 bg-slate-900 text-white px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-blue-600 hover:scale-105 active:scale-95 transition-all flex items-center gap-3 shadow-xl shadow-slate-200",children:[e.jsx(w,{size:20})," Nuevo Colaborador"]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o correo...",className:"w-full bg-slate-50 border-transparent rounded-2xl pl-12 pr-4 py-3 font-bold text-slate-700 focus:ring-slate-900 transition-all border outline-none",value:n,onChange:s=>C(s.target.value)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Estadísticas Rápidas"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase",children:"Activos"})]}),e.jsx("span",{className:"font-black text-slate-900",children:m.length})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{size:16,className:"text-slate-400"}),e.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase",children:"Roles Definidos"})]}),e.jsx("span",{className:"font-black text-slate-900",children:h.length})]})]})]})]}),e.jsxs("div",{className:"bg-blue-600 p-8 rounded-[2rem] text-white shadow-xl shadow-blue-200 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 group-hover:scale-150 transition-transform duration-700"}),e.jsx(p,{className:"mb-4 text-blue-200",size:32}),e.jsx("h3",{className:"text-lg font-black tracking-tight leading-tight",children:"Principio de Menor Privilegio"}),e.jsx("p",{className:"text-blue-100 text-[10px] mt-2 font-bold uppercase tracking-widest leading-relaxed",children:"Asigne solo los roles estrictamente necesarios para cada operación de planta."})]})]}),e.jsx("div",{className:"xl:col-span-3 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50 border-b border-slate-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Colaborador"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-center",children:"Roles Asignados"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:f.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-900 rounded-2xl flex items-center justify-center text-white font-black text-lg shadow-lg group-hover:scale-110 transition duration-300 capitalize",children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-slate-900 text-lg tracking-tighter capitalize",children:s.name}),e.jsxs("div",{className:"text-xs font-bold text-slate-400 flex items-center gap-1.5 lowercase",children:[e.jsx(H,{size:12})," ",s.email]})]})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[s.roles.map(l=>e.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-600 rounded-lg text-[9px] font-black uppercase tracking-widest border border-blue-100",children:l.name},l.id)),s.roles.length===0&&e.jsx("span",{className:"text-slate-300 text-[9px] font-black uppercase tracking-widest italic tracking-tighter",children:"Sin Roles"})]})}),e.jsx("td",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>g(s),className:"p-3 bg-white text-slate-400 rounded-xl border border-slate-200 hover:text-blue-600 hover:border-blue-600 transition shadow-sm hover:shadow-md",title:"Editar Usuario",children:e.jsx(N,{size:18})}),s.id!==k.user.id&&e.jsx("button",{onClick:()=>M(s),className:"p-3 bg-white text-slate-400 rounded-xl border border-slate-200 hover:text-red-600 hover:border-red-600 transition shadow-sm hover:shadow-md",title:"Eliminar Usuario",children:e.jsx(D,{size:18})})]})})]},s.id))})]}),f.length===0&&e.jsxs("div",{className:"p-20 text-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 rounded-3xl flex items-center justify-center mx-auto text-slate-300",children:e.jsx(v,{size:40})}),e.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"No se encontraron usuarios con esos criterios"})]})]})})]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-[3rem] shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[e.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-900 text-white flex justify-between items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-32 -mt-32"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-500 rounded-2xl text-white",children:r?e.jsx(N,{size:22}):e.jsx(w,{size:22})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black uppercase tracking-tighter",children:r?"Editar Colaborador":"Registrar Colaborador"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-0.5",children:"Control de Identidad y Roles"})]})]}),e.jsx("button",{onClick:()=>c(!1),className:"relative z-10 text-slate-400 hover:text-white transition p-2 hover:bg-white/10 rounded-xl",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:E,className:"flex-1 overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"p-8 space-y-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 ml-1",children:[e.jsx(j,{size:14,className:"text-blue-500"})," Información de Cuenta"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block ml-1",children:"Nombre Completo"}),e.jsx("input",{type:"text",required:!0,value:a.name,onChange:s=>i("name",s.target.value),className:`w-full bg-slate-50 border-slate-100 rounded-2xl px-6 py-4 font-bold text-slate-800 focus:ring-slate-900 transition border ${t.name?"border-red-500 bg-red-50":""}`,placeholder:"Ej. Juan Pérez"}),t.name&&e.jsx("p",{className:"text-red-500 text-[9px] font-black uppercase mt-1 ml-1",children:t.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block ml-1",children:"Correo Electrónico"}),e.jsx("input",{type:"email",required:!0,value:a.email,onChange:s=>i("email",s.target.value),className:`w-full bg-slate-50 border-slate-100 rounded-2xl px-6 py-4 font-bold text-slate-800 focus:ring-slate-900 transition border ${t.email?"border-red-500 bg-red-50":""}`,placeholder:"usuario@tuempresa.com"}),t.email&&e.jsx("p",{className:"text-red-500 text-[9px] font-black uppercase mt-1 ml-1",children:t.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block ml-1 flex items-center gap-2",children:[e.jsx(I,{size:12})," ",r?"Nueva Contraseña (Opcional)":"Contraseña de Acceso"]}),e.jsx("input",{type:"password",required:!r,value:a.password,onChange:s=>i("password",s.target.value),className:`w-full bg-slate-50 border-slate-100 rounded-2xl px-6 py-4 font-bold text-slate-800 focus:ring-slate-900 transition border ${t.password?"border-red-500 bg-red-50":""}`,placeholder:"Mínimo 8 caracteres"}),t.password&&e.jsx("p",{className:"text-red-500 text-[9px] font-black uppercase mt-1 ml-1",children:t.password})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between ml-1",children:[e.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(p,{size:14,className:"text-blue-500"})," Asignación de Roles / Permisos"]}),e.jsxs("span",{className:`text-[9px] font-black uppercase px-3 py-1 rounded-full ${a.roles.length>0?"bg-green-100 text-green-600":"bg-red-100 text-red-600"}`,children:[a.roles.length," Seleccionados"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:h.map(s=>e.jsxs("div",{onClick:()=>R(s.name),className:`p-4 rounded-2xl border-2 cursor-pointer transition-all flex items-center justify-between group ${a.roles.includes(s.name)?"bg-blue-600 border-blue-600 text-white shadow-lg shadow-blue-100":"bg-white border-slate-100 text-slate-600 hover:border-blue-200"}`,children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[11px] font-black uppercase tracking-widest leading-none",children:s.name}),e.jsx("span",{className:`text-[9px] font-bold mt-1 ${a.roles.includes(s.name)?"text-blue-100":"text-slate-400"}`,children:s.name==="Administrador Total"?"Acceso Global":"Permisos Específicos"})]}),e.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center transition-all ${a.roles.includes(s.name)?"bg-white text-blue-600 scale-110":"bg-slate-50 text-transparent"}`,children:e.jsx(O,{size:16,strokeWidth:4})})]},s.id))}),t.roles&&e.jsx("p",{className:"text-red-500 text-[9px] font-black uppercase mt-1 ml-1",children:"Debes seleccionar al menos un rol."})]})]}),e.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex flex-col sm:flex-row gap-4 mt-auto",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 bg-white border-b-4 border-slate-200 active:border-b-0 active:translate-y-1 text-slate-500 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-slate-100 transition-all shadow-lg",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:b,className:"flex-1 bg-slate-900 border-b-4 border-slate-700 active:border-b-0 active:translate-y-1 text-white py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-blue-600 hover:border-blue-800 transition-all flex items-center justify-center gap-3 shadow-xl disabled:opacity-50",children:b?"Procesando...":r?"Actualizar Colaborador":"Crear Colaborador"})]})]})]})})]})}export{ee as default};
