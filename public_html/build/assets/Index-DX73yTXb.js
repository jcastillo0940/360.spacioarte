import{r as n,u as y,j as e,H as w,R as C}from"./app-C7fXC9xy.js";import{A as k}from"./AuthenticatedLayout-DSgvOGZX.js";function L(){const[a,m]=n.useState([]),[i,d]=n.useState(new Set),{data:s,setData:l,post:h,processing:b,reset:g,errors:c}=y({codigo:"",nombre:"",tipo:"Activo",parent_id:"",permite_movimiento:!0,saldo_inicial:0,descripcion:""});n.useEffect(()=>{x()},[]);const x=()=>{fetch("/api/contabilidad/cuentas").then(t=>t.json()).then(m)},j=t=>{t.preventDefault(),h("/contabilidad/cuentas",{onSuccess:()=>{g(),x()}})},f=t=>{const o=new Set(i);o.has(t)?o.delete(t):o.add(t),d(o)},p=(t,o=0)=>{const r=t.children&&t.children.length>0,u=i.has(t.id),N=o*32;return e.jsxs(C.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-slate-50 transition border-b border-slate-100",children:[e.jsx("td",{className:"px-6 py-3",style:{paddingLeft:`${N+24}px`},children:e.jsxs("div",{className:"flex items-center gap-2",children:[r&&e.jsx("button",{onClick:()=>f(t.id),className:"w-5 h-5 flex items-center justify-center hover:bg-slate-200 rounded transition",children:e.jsx("svg",{className:`w-4 h-4 text-slate-600 transition-transform ${u?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),!r&&e.jsx("div",{className:"w-5"}),e.jsx("span",{className:"font-mono font-bold text-slate-900",children:t.codigo})]})}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:"font-medium text-slate-900",children:t.nombre})}),e.jsx("td",{className:"px-6 py-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${t.tipo==="Activo"?"bg-blue-100 text-blue-700":t.tipo==="Pasivo"?"bg-red-100 text-red-700":t.tipo==="Patrimonio"?"bg-purple-100 text-purple-700":t.tipo==="Ingreso"?"bg-green-100 text-green-700":t.tipo==="Costo"?"bg-orange-100 text-orange-700":t.tipo==="Gasto"?"bg-yellow-100 text-yellow-700":"bg-slate-100 text-slate-700"}`,children:t.tipo})}),e.jsx("td",{className:"px-6 py-3 text-center",children:t.permite_movimiento?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700",children:"Sí"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600",children:"No"})}),e.jsxs("td",{className:"px-6 py-3 text-right text-slate-900 font-bold",children:["$",new Intl.NumberFormat("en-US").format(t.saldo_inicial||0)]})]}),r&&u&&t.children.map(v=>p(v,o+1))]},t.id)};return e.jsxs(k,{children:[e.jsx(w,{title:"Catálogo de Cuentas"}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-black text-slate-900 flex items-center gap-3",children:[e.jsx("svg",{className:"w-8 h-8 text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Plan de Cuentas Contable"]}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Catálogo estructurado de cuentas"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("form",{onSubmit:j,className:"bg-white p-6 rounded-lg shadow-sm border border-slate-200 h-fit",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 mb-4",children:"Nueva Cuenta"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Código"}),e.jsx("input",{type:"text",value:s.codigo,onChange:t=>l("codigo",t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition font-mono",placeholder:"1.1.01",required:!0}),c.codigo&&e.jsx("span",{className:"text-red-500 text-xs",children:c.codigo})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Nombre de la Cuenta"}),e.jsx("input",{type:"text",value:s.nombre,onChange:t=>l("nombre",t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Tipo"}),e.jsxs("select",{value:s.tipo,onChange:t=>l("tipo",t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"Activo",children:"Activo"}),e.jsx("option",{value:"Pasivo",children:"Pasivo"}),e.jsx("option",{value:"Patrimonio",children:"Patrimonio"}),e.jsx("option",{value:"Ingreso",children:"Ingreso"}),e.jsx("option",{value:"Costo",children:"Costo"}),e.jsx("option",{value:"Gasto",children:"Gasto"}),e.jsx("option",{value:"Orden",children:"Orden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Cuenta Padre (Opcional)"}),e.jsxs("select",{value:s.parent_id,onChange:t=>l("parent_id",t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition",children:[e.jsx("option",{value:"",children:"Sin padre (Cuenta principal)"}),a.map(t=>e.jsxs("option",{value:t.id,children:[t.codigo," - ",t.nombre]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Saldo Inicial"}),e.jsx("input",{type:"number",step:"0.01",value:s.saldo_inicial,onChange:t=>l("saldo_inicial",t.target.value),className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.permite_movimiento,onChange:t=>l("permite_movimiento",t.target.checked),className:"rounded border-slate-300"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Permite movimiento directo"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-2",children:"Descripción"}),e.jsx("textarea",{value:s.descripcion,onChange:t=>l("descripcion",t.target.value),rows:"2",className:"w-full px-4 py-3 rounded-lg border border-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition"})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition",children:"Crear Cuenta"})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Estructura Contable"}),e.jsx("button",{onClick:()=>d(new Set(a.map(t=>t.id))),className:"px-3 py-1 text-sm font-bold text-blue-600 hover:text-blue-700",children:"Expandir todo"})]}),e.jsx("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-900 text-white sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Código"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold uppercase",children:"Nombre"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold uppercase",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-center text-sm font-bold uppercase",children:"Movimiento"}),e.jsx("th",{className:"px-6 py-4 text-right text-sm font-bold uppercase",children:"Saldo"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"px-6 py-12 text-center text-slate-500",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-bold",children:"No hay cuentas registradas"}),e.jsx("p",{className:"text-sm mt-2",children:"Comienza creando tu catálogo de cuentas"})]})}):a.map(t=>p(t))})]})})]})]})]})]})}export{L as default};
