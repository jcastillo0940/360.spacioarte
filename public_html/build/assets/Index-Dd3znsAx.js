import{c as h,u as b,j as e,H as f}from"./app-3DoqhR_o.js";import{A as j}from"./AuthenticatedLayout-314zbiSn.js";import{c as N}from"./createLucideIcon-BNyQ3YPG.js";import{S as y}from"./send-Bx1LnruW.js";import{U as v}from"./user-Ch_1qXy_.js";import{C as w}from"./circle-check-big-LPXb57_K.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],C=N("shopping-cart",k);function z({requisiciones:c,consumibles:d}){const{auth:n}=h().props,{data:a,setData:o,post:r,processing:x,reset:m}=b({items:[],notas:""}),p=s=>{a.items.find(t=>t.item_id===s.id)||o("items",[...a.items,{item_id:s.id,nombre:s.nombre,cantidad:1}])},u=s=>{s.preventDefault(),r(route("produccion.requisiciones.store"),{onSuccess:()=>m()})},g=s=>{confirm("¿Confirmar entrega física de los insumos? Se descontarán de bodega.")&&r(route("produccion.requisiciones.entregar",s))};return e.jsxs(j,{children:[e.jsx(f,{title:"Requisiciones de Insumos"}),e.jsx("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[e.jsxs("h2",{className:"font-black text-slate-800 mb-4 flex items-center gap-2 uppercase tracking-tighter",children:[e.jsx(C,{className:"text-blue-600"})," Solicitar Insumos"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 mb-6",children:d.map(s=>e.jsxs("button",{onClick:()=>p(s),className:"text-left p-3 border rounded-xl hover:bg-blue-50 font-bold text-xs uppercase",children:["+ ",s.nombre]},s.id))}),a.items.length>0&&e.jsxs("form",{onSubmit:u,className:"space-y-4 border-t pt-4",children:[a.items.map((s,l)=>e.jsxs("div",{className:"flex justify-between items-center gap-2",children:[e.jsx("span",{className:"text-xs font-bold flex-1",children:s.nombre}),e.jsx("input",{type:"number",className:"w-20 border-slate-200 rounded-lg text-xs",value:s.cantidad,onChange:t=>{const i=[...a.items];i[l].cantidad=t.target.value,o("items",i)}})]},s.item_id)),e.jsx("textarea",{placeholder:"Notas adicionales...",className:"w-full border-slate-200 rounded-xl text-xs",onChange:s=>o("notas",s.target.value)}),e.jsxs("button",{disabled:x,className:"w-full bg-blue-600 text-white font-black py-3 rounded-xl flex items-center justify-center gap-2",children:[e.jsx(y,{size:16})," ENVIAR A BODEGA"]})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:c.map(s=>{var l;return e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"font-black text-slate-900",children:["REQUISICIÓN #",s.id]}),e.jsx("span",{className:`px-3 py-1 rounded-full font-black text-[10px] uppercase ${s.estado==="Entregado"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.estado})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1 font-bold",children:[e.jsx(v,{size:12})," Solicitado por: ",(l=s.solicitante)==null?void 0:l.name]}),e.jsx("ul",{className:"bg-slate-50 p-3 rounded-xl space-y-1",children:s.items.map(t=>{var i;return e.jsxs("li",{className:"text-xs font-black text-slate-700",children:["• ",t.cantidad_solicitada," x ",(i=t.producto)==null?void 0:i.nombre]},t.id)})})]}),s.estado==="Pendiente"&&(n.roles.includes("Jefe de Bodega")||n.roles.includes("Administrador Total"))&&e.jsx("div",{className:"flex items-center",children:e.jsxs("button",{onClick:()=>g(s.id),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-4 rounded-2xl font-black text-sm flex items-center gap-2 shadow-lg shadow-green-100",children:[e.jsx(w,{size:20})," ENTREGAR MATERIAL"]})})]},s.id)})})]})})]})}export{z as default};
